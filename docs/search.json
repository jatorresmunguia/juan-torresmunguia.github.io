[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Juan TORRES MUNGUÍA | HUMANITARIAN DATA SCIENTIST",
    "section": "",
    "text": "Transforming complex data into actionable insights for social and humanitarian impact  Juan Torres Munguía, Ph.D. HUMANITARIAN DATA SCIENTIST"
  },
  {
    "objectID": "publications/working_papers/weapon_holding_nigeria_2023/index.html",
    "href": "publications/working_papers/weapon_holding_nigeria_2023/index.html",
    "title": "Factors Driving Weapons Holding in the North East of Nigeria",
    "section": "",
    "text": "Abstract\nThis MEAC findings report is based on data from three surveys conducted across the North East of Nigeria from February 2022 to November 2023. These surveys were conducted with unaffiliated community members, ex-associates from different armed groups, and current and ex-affiliates of community security organizations like the CJTF.\nThe report examines the factors driving weapons holding in the North East of Nigeria and determines if former associates of Boko Haram and community security groups are retaining their weapons (or rearming later) in order to strengthen disarmament efforts and reduce armed violence in the region. This report highlights a range of social, civic and victimization factors related to weapons holding. These findings can inform the design and implementation of conflict prevention and disarmament strategies in the North East of Nigeria. This is a joint report containing original data and analysis from MEAC, as well as contributions from UNIDIR’s Conventional Arms and Ammunition Programme and UNIDIR’s Gender and Disarmament Programme. The multi-perspective approach brought to bear for this study is essential for developing a holistic and nuanced understanding of how and why different populations arm themselves and what conditions lead them to lay aside their weapons, questions which have significant implications for the safety and peacebuilding efforts in a region that has long suffered from insurgent violence.\n\n\nCitation\n\nKleffmann, Johanna; Batault, Francesca; Torres Munguía, Juan Armando; O’Neil, Siobhan; Althuis, Jente; Shakur, Mohammed Rabby; Hallahan, Anna; Salama, Hana; Coulibaly, Mohamed (2023). Factors Driving Weapons Holding in the North East of Nigeria. Managing Exits from Armed Conflict (MEAC) - United Nations Institute for Disarmament Research Findings Report, 33. DOI: 10.37559/MEAC/23/11. Retrieved from: https://unidir.org/publication/factors-driving-weapons-holding-in-the-north-east-of-nigeria-findings-report-33/\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/road_from_alhol_camp_iraq_unu_2022/index.html",
    "href": "publications/working_papers/road_from_alhol_camp_iraq_unu_2022/index.html",
    "title": "The Road from Al Hol Camp: Reflections on the Iraqi Experience",
    "section": "",
    "text": "Abstract\nThis report is based on a survey of 223 residents in Jeddah-1 camp conducted between June 2022 and September 2022; a survey of 60 former Jeddah-1 residents; and key informants in Jeddah-1 and areas of return. The report presents data about the experience of return and reintegration for those coming from Al Hol, including an examination of how communities and returnees understand the concepts of rehabilitation and reintegration and how these concepts compare to international approaches. This data may be useful to UN and NGO partners working with Al Hol returnees, as well as efforts to support reintegration, community reconciliation, and broader peacebuilding efforts in Iraq – and possibly beyond. The report ends with an examination of key policy and programmatic implications of these findings.\n\n\nCitation\n\nParry, Jacqueline; Khoshnaw, Yousif Khalid; O’Neil, Siobhan; Torres Munguía, Juan Armando; Genat, Melisande (2022). The Road from Al Hol Camp: Reflections on the Iraqi Experience. Managing Exits from Armed Conflict (MEAC) - United Nations University Findings Report, 24. Retrieved from: https://unidir.org/publication/the-road-home-from-al-hol-camp-reflections-on-the-iraqi-experience-findings-report-24/\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/poverty_mexico_2020/index.html",
    "href": "publications/working_papers/poverty_mexico_2020/index.html",
    "title": "What Determines Poverty in Mexico?: A Quantile Regression Approach",
    "section": "",
    "text": "Abstract\nAccording to official poverty estimates in Mexico, more than 50 percent of the population was poor in 2016, half of which could not even afford the basic food basket. Whereas most of the existing research analyses poverty focusing exclusively on average income or on the expected probability of being poor, this paper departs from this approach by analyzing income differences between households in rural and urban settlements using boosting additive quantile models. The models are estimated using a cross-sectional dataset containing information of more that 50 thousand households for the year 2015. The main results highlight the importance of analyzing poverty from an individual, household, community and regional perspectives and the relevance of accounting for heterogeneity of the effects on female- and male-headed households. The results point towards the existence of a life-income cycle and the relevance of education, social networks, income equality and quality of government to fight poverty. The findings also indicate that economic empowerment of women matters for pro-poor income policies to be effective and point towards the need of introducing a gender approach in the study on poverty.\n\n\nCitation\n\nTorres Munguía, Juan Armando; Martínez-Zarzoso, Inmaculada (2020). What Determines Poverty in Mexico?: A Quantile Regression Approach. Diskussionsbeiträge des Ibero-America Institute for Economic Research (IAI) - Georg-August-Universität Göttingen, 246. Retrieved from: https://www.econstor.eu/handle/10419/217231\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/energy_poverty_2024/index.html",
    "href": "publications/working_papers/energy_poverty_2024/index.html",
    "title": "Mapping Energy Poverty Measures During the COVID-19 Pandemic: A New Global Panel Dataset",
    "section": "",
    "text": "Abstract\nThis paper compiles and presents a global panel dataset of energy poverty policy actions spanning the period March 2020 and March 2021. It builds on the COVID-19 Energy Map that collects policies to ensure the affordability of energy supplies for households during the COVID-19 pandemic. The monthly-frequency dataset is organized in a user-friendly way, allowing not only experts and researchers, but also the broader non-expert public, to examine and analyse the month-by-month policy changes across countries. The panel dataset is widely applicable for future research, especially as other global or regional datasets pertaining to the early years of the pandemic become available.\n\n\nCitation\n\nTorres Munguía, Juan Armando; Hesselman, Marlies; Martínez-Zarzoso, Inmaculada; Ruyssen, Ilse (2024). Mapping Energy Poverty Measures During the COVID-19 Pandemic: A New Global Panel Dataset. International Network for Economic Research, 2024.04. Retrieved from: https://infer-research.eu/publication/mapping-energy-poverty-measures-during-the-covid-19-pandemic-a-new-global-panel-dataset/\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/child_exits_lake_chad_unidir_2023/index.html",
    "href": "publications/working_papers/child_exits_lake_chad_unidir_2023/index.html",
    "title": "Child Exits from Armed Groups in the Lake Chad Basin",
    "section": "",
    "text": "Abstract\nThis report aims to contribute evidence to enable a better understanding of the dynamics of child exits from armed groups in the Lake Chad Basin. It is based on data collected in multiple qualitative and quantitative studies across the Lake Chad Region conducted from May 2021 through June 2022. The findings provide an insight into the expectations and experiences of child exits from armed groups, the reintegration support provided, community and family acceptance, and the risk of re-recruitment and continued engagement after exiting an armed group. Such knowledge has the potential to strengthen interventions that support children after they leave armed groups and re-enter civilian life, and to ensure that programming accounts for the unique needs of children.\n\n\nCitation\n\nvan Broeckhoven, Kato; O’Neil, Siobhan; Punton, Niamh; Torres Munguía, Juan Armando; Yetcha Ajimi, Fatima; Bukar, Mohammed; Madhuraj, Anamika (2023). Child Exits from Armed Groups in the Lake Chad Basin. United Nations Institute for Disarmament Research Findings Report, 31. DOI: 10.37559/MEAC/23/05\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/peer_reviewed_papers/risk_factors_emotional_violence_mexico_2022/index.html",
    "href": "publications/peer_reviewed_papers/risk_factors_emotional_violence_mexico_2022/index.html",
    "title": "Determinants of Emotional Intimate Partner Violence against Women and Girls with Children in Mexican Households: An Ecological Framework",
    "section": "",
    "text": "Abstract\nThe purpose of this paper is to identify the risk factors for emotional intimate partner violence (IPV) against women and girls with children in Mexico from an ecological perspective. To that end, we generate a dataset with 35,004 observations and 42 covariates, to which we apply an additive probit model estimated with a boosting algorithm to overcome high-dimensionality and simultaneously perform variable selection and model choice. The dataset integrates 10 information sources, allowing us to properly characterize the four levels of the ecological approach, which is the first contribution of this paper. In addition, there are three key contributions. First, we identify a number of factors significantly linked to emotional IPV against women with children: age, age at sexual initiation, age at marriage (or cohabitation), autonomy regarding professional issues, social support networks, division of housework, the community’s Gini index, women’s economic participation in the municipality, and the prevalence of crime against males in the region. Second, we discuss some risk factors whose effects have not been examined or have been underexplored for Mexico; these include women’s decision-making autonomy, social support networks, distribution of housework, the community’s economic inequality, and criminality. Third, we identify specific risk subgroups that are generally overlooked: women who had their first sexual intercourse during childhood and women who got married (or moved in together with a partner) late in life. The main results suggest that strategies aiming to promote women’s social and economic empowerment and reduce criminality should also incorporate a gender component regarding emotional violence against women with children in the context of intimate relationships.\n\n\nCitation\n\nTorres Munguía, Juan Armando; Martínez-Zarzoso, Inmaculada (2022). Determinants of Emotional Intimate Partner Violence against Women and Girls with Children in Mexican Households: An Ecological Framework. Journal of interpersonal violence, 37 (23-24). DOI: 10.1177/08862605211072179. Retrieved from: https://journals.sagepub.com/doi/10.1177/08862605211072179\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/peer_reviewed_papers/risk_factor_physical_violence_mexico_computational_soc_sci_2024/index.html",
    "href": "publications/peer_reviewed_papers/risk_factor_physical_violence_mexico_computational_soc_sci_2024/index.html",
    "title": "A model-based boosting approach to risk factors for physical intimate partner violence against women and girls in Mexico",
    "section": "",
    "text": "Abstract\nThe goal of this study was to identify and describe the extent to which a comprehensive set of risk factors from the ecological model are associated with physical intimate partner violence (IPV) victimization in Mexico. To achieve this goal, a structured additive probit model is applied to a dataset of 35,000 observations and 42 theoretical correlates from 10 data sources. Due to the model’s high dimensionality, the boosting algorithm is used for estimating and simultaneously performing variable selection and model choice. The findings indicate that age at sexual initiation and marriage, sexual and professional autonomy, social connectedness, household overcrowding, housework division, women’s political participation, and geographical space are associated with physical IPV. The findings provide evidence of risk factors that were previously unknown in Mexico or were solely based on theoretical grounds without empirical testing. Specifically, this paper makes three key contributions. First, by examining the individual and relationship levels, it was possible to identify high-risk population subgroups that are often overlooked, such as women who experienced sexual initiation during childhood and women living in overcrowded families. Second, the inclusion of community factors enabled the identification of the importance of promoting women’s political participation. Finally, the introduction of several emerging indicators allowed to examine the experiences faced by women in various aspects of life, such as decision-making power, social networks, and the division of housework.\n\n\nCitation\n\nTorres Munguía, Juan Armando (2024). A model-based boosting approach to risk factors for physical intimate partner violence against women and girls in Mexico. Journal of Computational Social Science. DOI: 10.1007/s42001-024-00292-5. Retrieved from: https://link.springer.com/article/10.1007/s42001-024-00292-5\n\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/peer_reviewed_papers/poverty_rural_mexico_plosone_2021/index.html",
    "href": "publications/peer_reviewed_papers/poverty_rural_mexico_plosone_2021/index.html",
    "title": "Examining gender inequalities in factors associated with income poverty in Mexican rural households",
    "section": "",
    "text": "Abstract\nAccording to 2016 official estimates, almost 60 percent of the rural population in Mexico (16.9 million people) had income levels below the poverty line, and approximately 29.2 percent (8.3 million) could not even afford the basic food basket. Whereas most poverty research disregards gender and exclusively analyzes average income or the expected probability of being poor, we depart from these approaches by examining the effect of potential risk factors on two of the lowest quantiles of income-to-poverty ratio distribution, namely the corresponding to poor and extremely poor families. Focusing on identifying heterogeneous effects according to the sex of the household head, we apply additive quantile models to a cross-sectional dataset containing information on 4,434 women-headed and 14,877 men-headed households. For each model, we introduce 45 variables at the individual/household, community, and regional levels. Two major contributions emerge from this paper. First, the identification of a subset of significant factors whose effect is independent of the head’s sex and is relevant for poor and extremely poor families. This is found for the variables credit card ownership, access to basic housing services, education level, and satisfaction with public services. Second, results also identify a subset of significant factors with an uneven effect on income according to the sex of the head that is observed both in the poor and extremely poor households. Variables having this gendered effect are the community’s income inequality, municipal human development, social networks, access to social security, and gender-based violence against women in the public sphere. Out of these, particularly relevant is the effect of the last three factors, whose association with income has not been explored before for rural Mexico and for which the bias among sexes increases as family income grows from extreme poverty to poverty level.\n\n\nCitation\n\nTorres Munguía, Juan Armando; Martínez-Zarzoso, Inmaculada (2021). Examining gender inequalities in factors associated with income poverty in Mexican rural households. PloS one, 16 (11). DOI: 10.1371/journal.pone.0259187. Retrieved from: https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0259187\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/peer_reviewed_papers/imputation_missing_poverty_Mexico_2014/index.html",
    "href": "publications/peer_reviewed_papers/imputation_missing_poverty_Mexico_2014/index.html",
    "title": "Comparison of Imputation Methods for Handling Missing Categorical Data with Univariate Pattern",
    "section": "",
    "text": "Abstract\nThis paper examines the sample proportions estimates in the presence of univariate missing categorical data. A database about smoking habits (2011 National Addiction Survey of Mexico) was used to create simulated yet realistic datasets at rates 5% and 15% of missingness, each for MCAR, MAR and MNAR mechanisms. Then the performance of six methods for addressing missingness is evaluated: listwise, mode imputation, random imputation, hot-deck, imputation by polytomous regression and random forests. Results showed that the most effective methods for dealing with missing categorical data in most of the scenarios assessed in this paper were hot-deck and polytomous regression approaches.\n\n\nCitation\n\nTorres Munguía, Juan Armando (2014). Comparison of Imputation Methods for Handling Missing Categorical Data with Univariate Pattern. Revista de métodos cuantitativos para la economía y la empresa (17). DOI: 10.46661/revmetodoscuanteconempresa.2196. Retrieved from: https://www.upo.es/revistas/index.php/RevMetCuant/article/view/2196\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "cv/index.html",
    "href": "cv/index.html",
    "title": "Curriculum vitae",
    "section": "",
    "text": "Download CV"
  },
  {
    "objectID": "blog/posts/how_to_maps/index.html",
    "href": "blog/posts/how_to_maps/index.html",
    "title": "Making interactive choropleths for disease outbreaks data using leaflet in R",
    "section": "",
    "text": "In these notes, you’ll learn how to load the data from the GitHub repository of the disease outbreaks project and use the leaflet library in R to create a choropleth map showing the geographic distribution of disease outbreaks from 1996 to September 30, 2024.\nThe final output will look like this:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStep 1: Load libraries\nThe following packages are required to replicate the choropleth map.\n\nlibrary(jsonlite)\nlibrary(tidyverse)\nlibrary(leaflet)\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(RColorBrewer)\nlibrary(htmlwidgets)\nlibrary(htmltools)\nlibrary(sf)\nlibrary(bslib)\n\n\n\nStep 2: Load data from GitHub\nNow, let’s fetch the latest disease outbreaks data from the GitHub repository using the GitHub API. The file’s name changes according to the last update, having a pattern beginning with the prefix “outbreaks_”, followed by the date of last update. For instance, for the version updated on September 30, 2024, the corresponding .csv file is outbreaks_30092024.csv.\n\n# Define the GitHub raw content URL\nurl_api &lt;- \"https://api.github.com/repos/jatorresmunguia/disease_outbreak_news/contents/Last%20update\"\nlast_file &lt;- fromJSON(content(GET(url_api), as = \"text\"))$name[grepl(fromJSON(content(GET(url_api), as = \"text\"))$name, pattern = paste0(\"^outbreaks\"))]\n\nrdata_file &lt;- last_file[grepl(\".csv$\", last_file)]\nfile_name &lt;- basename(rdata_file)\ndate_string &lt;- sub(\".*_(\\\\d{2})(\\\\d{2})(\\\\d{4}).*\", \"\\\\1-\\\\2-\\\\3\", file_name)\ndate_obj &lt;- dmy(date_string)\n\nformatted_date &lt;- format(date_obj, \"%d/%m/%Y\")  \nformatted_month &lt;- format(date_obj, \"%B %d, %Y\")     \n\noutbreaks &lt;- read.csv(paste0(\"https://raw.githubusercontent.com/jatorresmunguia/disease_outbreak_news/refs/heads/main/Last%20update\", \"/\", rdata_file),\n                      header = TRUE)\n\n# Ensure no extra blanks in country names\noutbreaks &lt;- outbreaks |&gt;\n  mutate(across(c(icd104n, iso3, Country), \n                ~ factor(str_squish(as.character(.)))))\n\n\n\nStep 3: Load geospatial data\nTo produce the choropleth maps, it is required to get the country administrative boundaries from a geospatial object. In this tutorial, the shapefile located in our GitHub is used.\n\n# URL for the ZIP file containing the shapefile (administrative boundaries)\nurl_shp &lt;- \"/vsicurl/https://github.com/jatorresmunguia/outbreaks_dashboard/raw/main/Data/shp_outbreaks.shp\"\n\nshpsf &lt;- st_read(url_shp, quiet = TRUE)\n\n\n\nStep 4: Reshape the data\nHere, we summarize the outbreaks data by iso3 code, year, and disease, and calculate the total number of outbreaks per country, and reshape to long format.\n\nshpsf_unique &lt;- shpsf |&gt; \n  st_drop_geometry() |&gt;\n  distinct(iso3, .keep_all = TRUE)\n\noutbreaks &lt;- shpsf_unique |&gt;\n  select(iso3, continent) |&gt;\n  right_join(outbreaks, by = \"iso3\") \n\ndata_base &lt;- outbreaks |&gt; \n  # Group the data\n  group_by(iso3, Year, icd104n) |&gt; \n  # Summarize the number of outbreaks\n  summarise(count = n(), .groups = 'drop') |&gt; \n  # Reshape to wide format\n  pivot_wider(names_from = icd104n, values_from = count, values_fill = 0) \n\ndata_base &lt;- data_base |&gt; \n  # Replace missing values (NA) with 0\n  mutate(across(-c(iso3, Year), ~replace(., is.na(.), 0))) |&gt; \n  # Calculate the total outbreaks per country\n  mutate(`All diseases` = rowSums(across(-c(iso3, Year)))) |&gt; \n  # Reshape to long format\n  pivot_longer(!c(iso3, Year), names_to = \"Disease\", values_to = \"outbreaks\") \n\n\n\nStep 5: Add the geographic attributes to the outbreaks data\nAfter loading the shapefile containing the administrative boundaries for countries, we need to integrate this geographic information into the disease outbreaks data. To do this, we have to merge the data_base object with the shpsf using iso3 country codes as key variable.\n\noutbreaks_all &lt;- data_base |&gt; \n  # Filter the data to include only the \"All diseases\" category, which represents the total number of outbreaks per country.\n  # Here, you can also select a particular disease\n  filter(Disease == \"All diseases\") |&gt; \n  # Group the data by country code (iso3) and summarize the total number of outbreaks for each country.\n  group_by(iso3) |&gt; \n  summarise(outbreaks = sum(outbreaks)) |&gt; \n  # Perform a right join with the spatial data (`shpsf`) to combine the outbreak data with geographical boundaries.\n  right_join(shpsf, by = \"iso3\") |&gt; \n  # Convert the resulting data into a spatial data frame using `st_as_sf()` to prepare for mapping.\n  mutate(outbreaks = replace_na(outbreaks, 0)) |&gt;\n  st_as_sf()\n\nNote: You can also use filter(between(Year, left = , right = )) to exclusively include a subset of observations by specifying a date range. For example, setting left = 2010 and right = 2020 would filter the data to only include outbreaks that occurred between 2010 and 2020. This is useful when you want to focus on a specific time period within your dataset.\n\n\nStep 6: Making the interactive map\nTo create the interactive choropleth map using leaflet library, we first set up a palette to categorize the number of outbreaks into bins, which is essential for visual differentiation on the choropleth map.\n\n# Define the color palette with bins for categorizing outbreak numbers\nmybins &lt;- c(0, 10, 20, 30, 40, 50, 60, 70)\nmypalette &lt;- colorBin(palette = \"PuRd\", \n                      domain = outbreaks_all$outbreaks,\n                      na.color = \"transparent\", bins = mybins)\n\nThen, we create labels to display the country name and the number of outbreaks when hovering over the choropleth map.\n\n# Create labels for each country\nmytext &lt;- paste0(\"&lt;b&gt;\", outbreaks_all$Country, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n                outbreaks_all$outbreaks, \" \", \"outbreaks\"\n                ) |&gt; \n  lapply(htmltools::HTML)\n\nAdd a title for the map\n\n# Add map title\ntag.map.title &lt;- tags$style(HTML(\"\n  .leaflet-control.map-title { \n    left: 50%;  \n    transform: translateX(-50%);\n    text-align: left;\n    padding-left: 10px; \n    padding-right: 10px; \n    background: rgba(255,255,255,0.75);\n    font-weight: bold;\n    font-size: 20px;\n    color: black;\n  }\n\"))\n\n# Create the map\ntitle &lt;- tags$div(\n  tag.map.title, HTML(\"Geographic distribution of disease outbreaks, Jan 1996-Sep 2024\")\n)\n\nFinally, we set up the Leaflet map with tiles, polygons, labels, a legend, and a title.\nleaflet(outbreaks_all, options = leafletOptions(zoomControl = FALSE)) |&gt;\n  addTiles() |&gt; \n  addProviderTiles(providers$Esri.WorldTopoMap) |&gt;\n  setView(lat = 10, lng = 0, zoom = 2) |&gt;\n  # Add polygons for countries and their outbreak data\n  addPolygons(\n    fillColor = ~mypalette(outbreaks),\n    stroke = TRUE,\n    fillOpacity = 0.9,\n    color = \"white\",\n    weight = 0.3,\n    label = mytext,\n    labelOptions = labelOptions(\n      style = list(\"font-weight\" = \"normal\", padding = \"3px 8px\"),\n      textsize = \"13px\",\n      direction = \"auto\"\n    )\n  ) |&gt;\n  # Add a legend to explain the color scale\n  addLegend(\n    pal = mypalette, values = ~outbreaks, opacity = 0.9,\n    title = \"Number of outbreaks:\",\n    position = \"bottomleft\"\n  ) |&gt;\n  # Add the title to the map\n  addControl(title, position = \"topleft\", className = \"map-title\") |&gt;\n  # Re-add the zoom control to the top-right corner\n  onRender(\"function(el, x) {\n          L.control.zoom({position:'topright'}).addTo(this);\n          }\")\n\n\nNote: You can add card(full_screen = TRUE) from bslib library to add an icon to expand the card’s size to the browser window."
  },
  {
    "objectID": "blog/blog.html",
    "href": "blog/blog.html",
    "title": "Blog of the DISEASE OUTBREAKS DATA project",
    "section": "",
    "text": "This blog is dedicated to helping researchers, data scientists, and public health professionals make the most of the disease outbreaks data using R. A range of techniques and tools that allow you to explore, visualize, and analyze the dataset in powerful ways will be shared.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMaking interactive choropleths for disease outbreaks data using leaflet in R\n\n\n\n\n\n\nleaflet\n\n\nmaps\n\n\ncode\n\n\n\n\n\n\nOct 15, 2024\n\n\nJuan Armando Torres Munguía, PhD\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "consulting/consulting.html",
    "href": "consulting/consulting.html",
    "title": "Consulting",
    "section": "",
    "text": "I offer a variety of consulting services tailored to research institutions, NGOs, international organizations, and policymakers, aiming to support them in all stages of the data life cycle.\nI have provided my services as a consultant to the following organizations:"
  },
  {
    "objectID": "consulting/consulting.html#services",
    "href": "consulting/consulting.html#services",
    "title": "Consulting",
    "section": "Services",
    "text": "Services\n\n\n\n\n\nResearch design\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nDefining objectives,\nIdentifying the target population,\nDesigning indicators,\nDeveloping survey questionnaires, and\nPlanning the sampling design.\n\nExperience:\nI have experience working with questionnaires on victimization experiences and perceptions of insecurity across various Latin American countries. Additionally, I have contributed to the design of surveys assessing the socioeconomic conditions of both displaced and non-displaced households in Sudan, as well as the experiences of individuals and families before, during, and after armed conflicts in Nigeria, Niger, Chad, Cameroon, and Iraq.\nExample:\nI helped organize the sampling design for the first national victimization survey of Panama Read the document (only in Spanish).\n\n\n\n\n\n\n\nData management\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nIdentification of data sources;\nGathering data from various sources;\nCleaning, structuring, and transforming messy data into research-ready datasets; and,\nOrganizing and storing data.\n\nExperience:\nI have experience in data cleaning, as well as creating data dictionaries and metadata. Additionally, I have worked on integrating data from household surveys, administrative records, censuses, and remote sensing sources. When statistical information is unavailable, I have leveraged LLMs, web scraping, and text and data mining techniques to generate new datasets.\nExample:\nI am the author of the global dataset of pandemic- and epidemic-prone disease outbreaks, which earned the 2023 ENLIGHT Open Science Award and was a finalist for the Falling Walls Science Breakthroughs in Science & Innovation Management.\nAdditionally, I led the data management and analysis of a survey conducted in 2022 across four key locations in Iraq previously occupied by ISIL.\n\n\n\n\n\n\n\n\n\n\nStatistical analysis\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nLinear regression and nonlinear regression modeling;\nMachine learning predictive modelling;\nDisaggregated analyses; and,\nStatistical tests to assess differences between populations.\n\nExperience:\nI have experience analyzing and interpreting data on victimization, gender-based violence, food security, income poverty, displacement, and armed conflict. Additionally, I have also developed and examined hard-to-measure phenomena such as indicators for severity assessments and perception of social networks.\nExample:\nAt UNIDIR, I analyzed and co-authored five research papers on subjects such as weapon holding, child recruitment, and family reintegration in Iraq.\n\n\n\n\n\n\n\nData visualization\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nBuilding dynamic and interactive dashboards; and,\nCustom data visualizations.\n\nExperience:\nI have experience developing dynamic R Shiny dashboards and creating interactive visualizations using ggplot2, tidyplots, and Leaflet. My work includes designing choropleth maps and tailored data visualizations for reports, presentations, and academic publications.\nExample:\nGo to the Shiny Dashboard of the DISEASE OUTBREAKS DATA project.\nAt IOM, I contributed to developing a PowerBI interactive dashboard for migration governance in Mesoamerica and the Caribbean."
  },
  {
    "objectID": "consulting/consulting.html#deliverables",
    "href": "consulting/consulting.html#deliverables",
    "title": "Consulting",
    "section": "Deliverables",
    "text": "Deliverables\nI am committed to reproducible research. Therefore, upon completing the consultancy, you will receive well-documented R scripts, along with R Markdown/Quarto files detailing each step of the work, clean datasets in the required format (Excel, CSV, SPSS, etc.), and/or an analytical report."
  },
  {
    "objectID": "consulting/consulting.html#lets-collaborate",
    "href": "consulting/consulting.html#lets-collaborate",
    "title": "Consulting",
    "section": "Let’s collaborate",
    "text": "Let’s collaborate\nIf you need support with data management, statistical analysis, visualization, or team training on these tasks, feel free to reach out at ja.torresmunguia@gmail.com! Let’s discuss how I can help you leverage your data for meaningful impact."
  },
  {
    "objectID": "publications/index.html",
    "href": "publications/index.html",
    "title": "Publications",
    "section": "",
    "text": "Margo Tonnelier, Damien Delforge, Regina Below, Juan Armando Torres Munguía \n                    \n                    \n                    , Claude Saegerman, Valentin Wathelet, Joris A. F. van Loenhout, Niko Speybroeck (2025) \"What makes an epidemic a disaster: the future of epidemics within the EM-DAT International Disaster Database\", BMC Public Health,\n                     DOI: 10.1186/s12889-024-21026-2. \n                    \n                \n            \n\n        \n          \n            \n              \n                disease outbreaks\n              \n            \n              \n                epidemics\n              \n            \n              \n                pandemics\n              \n            \n              \n                disasters\n              \n            \n              \n                open data\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2024) \"A model-based boosting approach to risk factors for physical intimate partner violence against women and girls in Mexico\", Journal of Computational Social Science,\n                     DOI: 10.1007/s42001-024-00292-5. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                intimate partner violence\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2024) \"An analysis of the risk factors for intimate partner sexual violence against women and girls in Mexico\", Journal of Gender-Based Violence,\n                     DOI: 10.1332/23986808Y2024D000000031. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                intimate partner violence\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2024) \"Identifying Gender-Specific Risk Factors for Income Poverty across Poverty Levels in Urban Mexico: A Model-Based Boosting Approach\", Social Sciences,\n                     DOI: 10.3390/socsci13030159. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                poverty\n              \n            \n              \n                urban households\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Florina Cristina Badarau, Luis Rodrigo Díaz Pavez, Inmaculada Martínez-Zarzoso, Konstantin M. Wacker (2022) \"A global dataset of pandemic- and epidemic-prone disease outbreaks\", Scientific Data,\n                     DOI: 10.1038/s41597-022-01797-2. \n                    \n                \n            \n\n        \n          \n            \n              \n                disease outbreaks\n              \n            \n              \n                epidemics\n              \n            \n              \n                pandemics\n              \n            \n              \n                open data\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         Website\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         GitHub\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         ShinyApp\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Inmaculada Martínez-Zarzoso (2022) \"Determinants of Emotional Intimate Partner Violence against Women and Girls with Children in Mexican Households: An Ecological Framework\", Journal of Interpersonal Violence,\n                     DOI: 10.1177/08862605211072179. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                intimate partner violence\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Inmaculada Martínez-Zarzoso (2021) \"Examining gender inequalities in factors associated with income poverty in Mexican rural households\", PloS One,\n                     DOI: 10.1371/journal.pone.0259187. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                poverty\n              \n            \n              \n                rural households\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2014) \"Comparison of Imputation Methods for Handling Missing Categorical Data with Univariate Pattern\", Revista de métodos cuantitativos para la economía y la empresa,\n                     DOI: 10.46661/revmetodoscuanteconempresa.2196. \n                    \n                \n            \n\n        \n          \n            \n              \n                imputation methods\n              \n            \n              \n                missing data\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n\n\n\n\nNo matching items"
  },
  {
    "objectID": "publications/index.html#journal-articles",
    "href": "publications/index.html#journal-articles",
    "title": "Publications",
    "section": "",
    "text": "Margo Tonnelier, Damien Delforge, Regina Below, Juan Armando Torres Munguía \n                    \n                    \n                    , Claude Saegerman, Valentin Wathelet, Joris A. F. van Loenhout, Niko Speybroeck (2025) \"What makes an epidemic a disaster: the future of epidemics within the EM-DAT International Disaster Database\", BMC Public Health,\n                     DOI: 10.1186/s12889-024-21026-2. \n                    \n                \n            \n\n        \n          \n            \n              \n                disease outbreaks\n              \n            \n              \n                epidemics\n              \n            \n              \n                pandemics\n              \n            \n              \n                disasters\n              \n            \n              \n                open data\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2024) \"A model-based boosting approach to risk factors for physical intimate partner violence against women and girls in Mexico\", Journal of Computational Social Science,\n                     DOI: 10.1007/s42001-024-00292-5. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                intimate partner violence\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2024) \"An analysis of the risk factors for intimate partner sexual violence against women and girls in Mexico\", Journal of Gender-Based Violence,\n                     DOI: 10.1332/23986808Y2024D000000031. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                intimate partner violence\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2024) \"Identifying Gender-Specific Risk Factors for Income Poverty across Poverty Levels in Urban Mexico: A Model-Based Boosting Approach\", Social Sciences,\n                     DOI: 10.3390/socsci13030159. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                poverty\n              \n            \n              \n                urban households\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Florina Cristina Badarau, Luis Rodrigo Díaz Pavez, Inmaculada Martínez-Zarzoso, Konstantin M. Wacker (2022) \"A global dataset of pandemic- and epidemic-prone disease outbreaks\", Scientific Data,\n                     DOI: 10.1038/s41597-022-01797-2. \n                    \n                \n            \n\n        \n          \n            \n              \n                disease outbreaks\n              \n            \n              \n                epidemics\n              \n            \n              \n                pandemics\n              \n            \n              \n                open data\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         Website\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         GitHub\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         ShinyApp\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Inmaculada Martínez-Zarzoso (2022) \"Determinants of Emotional Intimate Partner Violence against Women and Girls with Children in Mexican Households: An Ecological Framework\", Journal of Interpersonal Violence,\n                     DOI: 10.1177/08862605211072179. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                intimate partner violence\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Inmaculada Martínez-Zarzoso (2021) \"Examining gender inequalities in factors associated with income poverty in Mexican rural households\", PloS One,\n                     DOI: 10.1371/journal.pone.0259187. \n                    \n                \n            \n\n        \n          \n            \n              \n                additive regression models\n              \n            \n              \n                boosting algorithm\n              \n            \n              \n                poverty\n              \n            \n              \n                rural households\n              \n            \n              \n                gender\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                     (2014) \"Comparison of Imputation Methods for Handling Missing Categorical Data with Univariate Pattern\", Revista de métodos cuantitativos para la economía y la empresa,\n                     DOI: 10.46661/revmetodoscuanteconempresa.2196. \n                    \n                \n            \n\n        \n          \n            \n              \n                imputation methods\n              \n            \n              \n                missing data\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n\n\n\n\nNo matching items"
  },
  {
    "objectID": "publications/index.html#working-papers",
    "href": "publications/index.html#working-papers",
    "title": "Publications",
    "section": "Working papers",
    "text": "Working papers\n\n\n\n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Marlies Hesselman, Inmaculada Martínez-Zarzoso, Ilse Ruyssen (2024) \"Mapping Energy Poverty Measures During the COVID-19 Pandemic: A New Global Panel Dataset\", International Network for Economic Research,\n                    \n                     Retrieved from: https://infer-research.eu/publication/mapping-energy-poverty-measures-during-the-covid-19-pandemic-a-new-global-panel-dataset/.\n                \n            \n\n        \n          \n            \n              \n                COVID-19\n              \n            \n              \n                energy\n              \n            \n              \n                poverty\n              \n            \n              \n                open data\n              \n            \n              \n                public policies\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Data\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         Code\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         GitHub\n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                        \n                         ShinyApp\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Johanna Kleffmann, Francesca Batault, Juan Armando Torres Munguía \n                    \n                    \n                    , Siobhan O’Neil, Jente Althuis, Mohammed Rabby Shakur, Anna Hallahan, Hana Salama, Mohamed Coulibaly (2023) \"Factors Driving Weapons Holding in the North East of Nigeria\", Managing Exits from Armed Conflict (MEAC) - United Nations Institute for Disarmament Research Findings Report,\n                     DOI: 10.37559/MEAC/23/11. \n                    \n                \n            \n\n        \n          \n            \n              \n                armed conflict\n              \n            \n              \n                Boko Haram\n              \n            \n              \n                weapon holding\n              \n            \n              \n                Nigeria\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Kato van Broeckhoven, Siobhan O’Neil, Niamh Punton, Juan Armando Torres Munguía \n                    \n                    \n                    , Fatima Yetcha Ajimi Badu, Mohammed Bukar, Anamika Madhuraj (2023) \"Child Exits from Armed Groups in the Lake Chad Basin\", United Nations Institute for Disarmament Research Findings Report,\n                     DOI: 10.37559/MEAC/23/05. \n                    \n                \n            \n\n        \n          \n            \n              \n                armed conflict\n              \n            \n              \n                Boko Haram\n              \n            \n              \n                child exits\n              \n            \n              \n                Lake Chad basin\n              \n            \n              \n                Nigeria\n              \n            \n              \n                Niger\n              \n            \n              \n                Chad\n              \n            \n              \n                Cameroon\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Mohammed Bukar, Fatima Yetcha Ajimi Badu, Siobhan O’Neil, Kato van Broeckhoven (2023) \"The Prospects for Remote Assessment: A Comparison of Phone vs In-Person Interviews in Nigeria\", Managing Exits from Armed Conflict (MEAC) - United Nations Institute for Disarmament Research Findings Report,\n                     DOI: 10.37559/MEAC/23/03. \n                     Retrieved from: https://unidir.org/publication/the-prospects-for-remote-assessment-a-comparison-of-phone-vs-in-person-interviews-in-nigeria-findings-report-29.\n                \n            \n\n        \n          \n            \n              \n                armed conflict\n              \n            \n              \n                Nigeria\n              \n            \n              \n                remote assessment\n              \n            \n              \n                survey methodology\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Jacqueline Parry, Yousif Khalid Khoshnaw, Siobhan O’Neil, Juan Armando Torres Munguía \n                    \n                    \n                     (2023) \"Coming Home: The Return and Reintegration of Families with Perceived ISIL Affiliation in Iraq\", Managing Exits from Armed Conflict (MEAC) - United Nations Institute for Disarmament Research Findings Report,\n                     DOI: 10.37559/MEAC/23/02. \n                     Retrieved from: https://www.unidir.org/publication/coming-home-return-and-reintegration-families-perceived-isil-affiliation-iraq-findings.\n                \n            \n\n        \n          \n            \n              \n                armed conflict\n              \n            \n              \n                Iraq\n              \n            \n              \n                ISIL\n              \n            \n              \n                return\n              \n            \n              \n                reintegration\n              \n            \n              \n                displacement\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Jacqueline Parry, Yousif Khalid Khoshnaw, Siobhan O’Neil, Juan Armando Torres Munguía \n                    \n                    \n                    , Melisande Genat (2022) \"The Road from Al Hol Camp: Reflections on the Iraqi Experience\", Managing Exits from Armed Conflict (MEAC) - United Nations University Findings Report,\n                    \n                     Retrieved from: https://unidir.org/publication/the-road-home-from-al-hol-camp-reflections-on-the-iraqi-experience-findings-report-24/.\n                \n            \n\n        \n          \n            \n              \n                armed conflict\n              \n            \n              \n                Iraq\n              \n            \n              \n                ISIL\n              \n            \n              \n                return\n              \n            \n              \n                reintegration\n              \n            \n              \n                displacement\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Niamh Punton, Juan Armando Torres Munguía \n                    \n                    \n                    , Kato van Broeckhoven, Siobhan O’Neil, Mohammed Bukar, Fatima Yetcha Ajimi Badu, Anamika Madhuraj, Saniya Ali (2022) \"Child Recruitment in the Lake Chad Basin\", Managing Exits from Armed Conflict (MEAC) - United Nations University Findings Report,\n                    \n                     Retrieved from: https://unidir.org/publication/child-recruitment-in-the-lake-chad-basin-findings-report-22/.\n                \n            \n\n        \n          \n            \n              \n                armed conflict\n              \n            \n              \n                Boko Haram\n              \n            \n              \n                child recruitment\n              \n            \n              \n                Lake Chad basin\n              \n            \n              \n                Nigeria\n              \n            \n              \n                Niger\n              \n            \n              \n                Chad\n              \n            \n              \n                Cameroon\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Inmaculada Martínez-Zarzoso (2020) \"What Determines Poverty in Mexico?: A Quantile Regression Approach\", Diskussionsbeiträge des Ibero-America Institute for Economic Research (IAI) - Georg-August-Universität Göttingen,\n                    \n                     Retrieved from: https://www.econstor.eu/handle/10419/217231.\n                \n            \n\n        \n          \n            \n              \n                poverty\n              \n            \n              \n                Mexico\n              \n            \n              \n                quantile models\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Juan Armando Torres Munguía \n                    \n                    \n                    , Inmaculada Martínez-Zarzoso (2018) \"What is behind homicide gender gaps in Mexico? A spatial semiparametric approach\", Diskussionsbeiträge des Ibero-America Institute for Economic Research (IAI) - Georg-August-Universität Göttingen,\n                    \n                     Retrieved from: https://www.econstor.eu/bitstream/10419/178674/1/1023106922.pdf.\n                \n            \n\n        \n          \n            \n              \n                homicides\n              \n            \n              \n                gender\n              \n            \n              \n                violence\n              \n            \n              \n                semiparametric models\n              \n            \n              \n                geospatial models\n              \n            \n              \n                Mexico\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n        \n            \n                \n                    Carlos J. Vilalta Perdomo, José G. Castillo, Juan Armando Torres Munguía \n                    \n                    \n                     (2016) \"Violent Crime in Latin American Cities\", Inter-American Development Bank Discussion Paper,\n                     DOI: http://dx.doi.org/10.18235/0007973. \n                    \n                \n            \n\n        \n          \n            \n              \n                crime\n              \n            \n              \n                Latin America\n              \n            \n              \n                violence\n              \n            \n              \n                cities\n              \n            \n          \n        \n\n            \n                \n                    \n                        \n                               LEARN MORE \n                        \n                    \n                    \n                        \n                        \n                        \n                        \n                        \n                        \n                         PDF\n                        \n                        \n                        \n                        \n                    \n                \n            \n        \n    \n\n\n\n\nNo matching items"
  },
  {
    "objectID": "publications/peer_reviewed_papers/outbreaks_scidata_2022/index.html",
    "href": "publications/peer_reviewed_papers/outbreaks_scidata_2022/index.html",
    "title": "A global dataset of pandemic- and epidemic-prone disease outbreaks",
    "section": "",
    "text": "Abstract\nThis paper presents a new dataset of infectious disease outbreaks collected from the Disease Outbreak News and the Coronavirus Dashboard produced by the World Health Organization. The dataset contains information on 70 infectious diseases and 2227 public health events that occurred over the period from January 1996 to March 2022 in 233 countries and territories around the world. We illustrate the potential use of this dataset to the research community by analysing the spatial distribution of disease outbreaks. We find evidence of spatial clusters of high incidences hot spots in Africa, America, and Asia. This spatial analysis enables policymakers to identify the regions with the greatest likelihood of suffering from disease outbreaks and, taking into account their degree of preparedness and vulnerability, to develop policies that may help contain the spreading of future outbreaks. Further applications could focus on combining our data with other information sources to study, for instance, the link between environmental, globalization, and/or socioeconomic factors with disease outbreaks.\n\n\nCitation\n\nTorres Munguía, Juan Armando; Badarau, Florina Cristina; Díaz Pavez, Luis Rodrigo; Martínez-Zarzoso, Inmaculada; Wacker, Konstantin M. (2022). A global dataset of pandemic- and epidemic-prone disease outbreaks. Scientific data, 9 (1). DOI: 10.1038/s41597-022-01797-2. Retrieved from: https://www.nature.com/articles/s41597-022-01797-2\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/peer_reviewed_papers/poverty_urban_mexico_mdpi_2024/index.html",
    "href": "publications/peer_reviewed_papers/poverty_urban_mexico_mdpi_2024/index.html",
    "title": "Identifying Gender-Specific Risk Factors for Income Poverty across Poverty Levels in Urban Mexico: A Model-Based Boosting Approach",
    "section": "",
    "text": "Abstract\nThis paper aims to identify income-poverty risk factors in urban Mexican households. Special emphasis is paid to examine differences between female- and male-headed families. To this, a dataset with 45 theoretical factors at the individual/household, community, and regional levels, integrating information from nine sources, is created. To these data, additive quantile models are estimated via the boosting algorithm. From a gender standpoint, the following main contributions come from this paper. First, educational lag is particularly relevant for female-headed households. Second, there is a gendered life cycle in the income trajectory for poor households with a head having a medium level of education. Third, some households, traditionally disregarded, are found to be even poorer: those lacking social connectedness, without credit cards, with an extended composition, in which the female head spends a large part of her time on housework, and families headed by young women with a medium level of education. Finally, communities and regions where families have a lower income-to-poverty ratio are characterized as having an unequal income distribution, lower human development, lower levels of women’s economic participation, poor quality of services, and lower gender-based violence levels in the public sphere but higher gender-based violence levels in the family context.\n\n\nCitation\n\nTorres Munguía, Juan (2024). Identifying Gender-Specific Risk Factors for Income Poverty across Poverty Levels in Urban Mexico: A Model-Based Boosting Approach. Social Sciences, 13 (3). DOI: 10.3390/socsci13030159. Retrieved from: https://www.mdpi.com/2076-0760/13/3/159\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/peer_reviewed_papers/risk_factor_sexual_violence_mexico_2024/index.html",
    "href": "publications/peer_reviewed_papers/risk_factor_sexual_violence_mexico_2024/index.html",
    "title": "An analysis of the risk factors for intimate partner sexual violence against women and girls in Mexico",
    "section": "",
    "text": "Abstract\nThe goal of this study is to identify the extent to which a set of risk factors from the ecological model are associated with intimate partner sexual violence victimisation in Mexico. To achieve this goal, a structured additive probit model is applied to a dataset of 35,004 observations and 42 correlates. Findings indicate that age at sexual initiation, women’s sexual and professional autonomy, and social connectedness are associated with their victimisation risks. The findings provide evidence of factors that were previously unknown in Mexico or were solely based on theory but lacking empirical analysis. There are four key contributions. First, findings indicate that factors closer to the individual, such as personal experiences and interpersonal relationships, are more influential in explaining the women’s risks of IPSV victimisation. Second, significant factors were identified, including age at first sexual intercourse, autonomy in sexual and professional decision-making, and social networks. Third, it was possible to identify high-risk population subgroups that are often overlooked, such as women who had their sexual initiation during childhood. Finally, the introduction of some emerging indicators allowed for the examination of the experiences faced by women in various aspects of life, such as decision-making power and social networks.\n\n\nCitation\n\nTorres Munguía, Juan Armando (2024). An analysis of the risk factors for intimate partner sexual violence against women and girls in Mexico. Journal of Gender-Based Violence, (published online ahead of print 2024). DOI: 10.1332/23986808Y2024D000000031. Retrieved from: https://bristoluniversitypressdigital.com/view/journals/jgbv/aop/article-10.1332-23986808Y2024D000000031/article-10.1332-23986808Y2024D000000031.xml\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/behind_homicides_gender_gaps_mexico_2018/index.html",
    "href": "publications/working_papers/behind_homicides_gender_gaps_mexico_2018/index.html",
    "title": "What is behind homicide gender gaps in Mexico? A spatial semiparametric approach",
    "section": "",
    "text": "Abstract\n\nFrom 1990 to 2016, more than 425,000 homicides have occurred in Mexico. In 2016, the country recorded the world’s second largest number of conflict fatalities with more than 24,000 killings. Despite the growing attention for inquiring into specific causes of homicide victimization, research on the matter suffer from three important shortcomings: disregard for introducing a gender perspective, lack of a multilevel approach -use of information both at the victim and community levels- and the exclusive use of traditional linear models -failing to capture nonlinear relationships, as can be expected, in the linkage between age of a person and their likelihood of being victim of crime-. In order to contribute to the analysis of homicides in Mexico, the present study develops a semiparametric approach to investigate the determinants of gender bias in homicide victimization in Mexico. Homicide statistics from 2010 to 2014 and 2010 census data are used to construct a logistic model with sex of the victim as response variable and a set of potential categorical and continuous covariates. The main results suggest that gender differences in victimization can be explained by the mechanism of killing, interaction between age of the victim and the killing mechanism, social deprivation of the municipality of occurrence, share of the population living in female-headed households, share of the population living in indigenous-headed households, random effects and spatial effects.\n\n\n\nCitation\n\nTorres Munguía, Juan Armando; Martínez-Zarzoso, Inmaculada (2018). What is behind homicide gender gaps in Mexico? A spatial semiparametric approach. Diskussionsbeiträge des Ibero-America Institute for Economic Research (IAI) - Georg-August-Universität Göttingen, 236. Retrieved from: https://www.econstor.eu/handle/10419/178674\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/child_recruitment_lake_chad_unu_2022/index.html",
    "href": "publications/working_papers/child_recruitment_lake_chad_unu_2022/index.html",
    "title": "Child Recruitment in the Lake Chad Basin",
    "section": "",
    "text": "Abstract\nThis MEAC findings report aims to contribute evidence to enable a better understanding of the current dynamics of child recruitment in the Lake Chad Basin, in order to strengthen, not only efforts to prevent children’s involvement with armed actors, but also interventions that support them after they leave armed groups and re-enter civilian life. Findings highlight a range of social, civic, and family-based factors related to recruitment which may be of use when designing prevention and reintegration strategies for children in the Lake Chad Basin region.\n\n\nCitation\n\nPunton, Niamh; Torres Munguía, Juan Armando; van Broeckhoven, Kato; O’Neil, Siobhan; Bukar, Mohammed; Yetcha Ajimi, Fatima; Madhuraj, Anamika; Ali, Saniya (2022). Child Recruitment in the Lake Chad Basin. Managing Exits from Armed Conflict (MEAC) - United Nations University Findings Report, 22. Retrieved from: https://unidir.org/publication/child-recruitment-in-the-lake-chad-basin-findings-report-22/\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/isil_affiliation_unidir_2023/index.html",
    "href": "publications/working_papers/isil_affiliation_unidir_2023/index.html",
    "title": "Coming Home: The Return and Reintegration of Families with Perceived ISIL Affiliation in Iraq",
    "section": "",
    "text": "Abstract\nThis report is based on data collected from June to July 2022 from a total of 1,882 respondents collected in four key locations, each of which was occupied by ISIL: Al Qaim (Anbar governorate), Habaniyya (Anbar governorate), Tooz (Salah al-Din governorate), and Muhalabiya (Nineveh governorate). The sample was divided into two roughly equal halves: those who had benefited from UNDP support (810 persons or 43 per cent) and a randomized household sample from the same areas (1,072 persons or 57 per cent). In addition, qualitative interviews were carried out in the same four locations between July and November 2022 with key stakeholders (local authorities, tribal leaders, mukhtars) as well as 60 survey respondents to explore the survey findings in greater depth. The four locations were chosen because they are the sites of community-based reconciliation and reintegration programming delivered by UNDP Iraq. Amongst other objectives, the programmes seek to support the return and reintegration of families perceived as having ISIL affiliation and to support the communities that receive them. The report ends with an examination of key policy and programmatic implications of these findings. The report presents data about community experiences pre-, during, and post-war, and examines what community experiences, perceptions, and preferences mean for reintegration prospects for those families perceived as having ISIL affiliation. This data may be useful to UN and NGO partners working in the region to bolster their early recovery programming, as well as efforts to support reintegration, community reconciliation, and broader peacebuilding efforts. The report ends with an examination of key policy and programmatic implications of these findings.\n\n\nCitation\n\nParry, Jacqueline; Khoshnaw, Yousif Khalid; O’Neil, Siobhan; Torres Munguía, Juan Armando (2023). Coming Home: The Return and Reintegration of Families with Perceived ISIL Affiliation in Iraq. Managing Exits from Armed Conflict (MEAC) - United Nations Institute for Disarmament Research Findings Report, 28. DOI: 10.37559/MEAC/23/02. Retrieved from: https://www.unidir.org/publication/coming-home-return-and-reintegration-families-perceived-isil-affiliation-iraq-findings\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/prospects_remote_assessment_nigeria_unidir_2023/index.html",
    "href": "publications/working_papers/prospects_remote_assessment_nigeria_unidir_2023/index.html",
    "title": "The Prospects for Remote Assessment: A Comparison of Phone vs In-Person Interviews in Nigeria",
    "section": "",
    "text": "Abstract\nThis report is based on a research study about the effects of the interview method on non-response rates and honest reporting on sensitive question topics. Specifically, the study set out to compare the answers to a set of five questions on drug use, victimization experiences, and social connectedness with the Boko Haram armed group between interviews conducted by phone and those administered face-to-face with an enumerator. The data comes from a survey carried out between May 2021 and early June 2022 (amid the COVID-29 health crisis) in the Maiduguri Metropolitan area and the communities of Jere and Kodunga, in Borno State, Nigeria, a region hard hit by the Boko Haram insurgency. This report provides empirical evidence on the potential for utilizing remote assessment of UN-supported programmes in insecure and/or inaccessible areas. This report examines what works to overcome methodological challenges in remote data collection in the context of armed conflict, specifically by identifying the specific roll-out practices that appear to bolster responses.\n\n\nCitation\n\nTorres Munguía, Juan Armando; Bukar, Mohammed; Yetcha Ajimi, Fatima; O’Neil, Siobhan; van Broeckhoven, Kato (2023). The Prospects for Remote Assessment: A Comparison of Phone vs In-Person Interviews in Nigeria. Managing Exits from Armed Conflict (MEAC) - United Nations Institute for Disarmament Research Findings Report, 29. DOI: 10.37559/MEAC/23/03. Retrieved from: https://unidir.org/publication/the-prospects-for-remote-assessment-a-comparison-of-phone-vs-in-person-interviews-in-nigeria-findings-report-29/\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "publications/working_papers/violent_crime_latam_iadb_2016/index.html",
    "href": "publications/working_papers/violent_crime_latam_iadb_2016/index.html",
    "title": "Violent Crime in Latin American Cities",
    "section": "",
    "text": "Abstract\nIn the last two decades, Latin America has been describes as an unsafe and violent region. Nonetheless, such picture is mostly based on homicide rates. Even though homicide is considered the best recorded crime, it does not provide full account of other forms of violent crime. Moreover, a great deal of research on crime throughout the region tends to be descriptive and anecdotal. Misunderstanding the causes of crime and disregarding evidence might induce policy makers to implement ineffective strategies, particularly at the local level. Therefore, based on Social Disorganization Theory, this study explains violent crime across and within selected cities of Latin America.\n\n\nCitation\n\nVilalta Perdomo, Carlos J.; Castillo, José G.; Torres Munguía, Juan Armando (2016). Violent Crime in Latin American Cities. Inter-American Development Bank Discussion Paper, 474. DOI: http://dx.doi.org/10.18235/0007973. Retrieved from: https://publications.iadb.org/en/violent-crime-latin-american-cities\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "about/about.html",
    "href": "about/about.html",
    "title": "Juan Torres Munguía, Ph.D.",
    "section": "",
    "text": "I am a consultant and independent researcher specializing in the management, analysis, and visualization of data related to humanitarian crises and most vulnerable populations.\nMy research combines statistics, machine learning algorithms, and data science methods to better understand how individuals, families, and communities experience, adapt to, and cope with phenomena such as armed conflict, violence, climate change, poverty, and displacement.\nI am also an R-enthusiast who loves coding to optimize and streamline my work. Check out my Blog, where I share insights on using R for the study of humanitarian and development economics data."
  },
  {
    "objectID": "consulting/index.html",
    "href": "consulting/index.html",
    "title": "Consulting",
    "section": "",
    "text": "I offer a variety of consulting services tailored to research institutions, NGOs, international organizations, and policymakers, aiming to support them in all stages of the data life cycle.\nI have provided my services as a consultant to the following organizations:"
  },
  {
    "objectID": "consulting/index.html#services",
    "href": "consulting/index.html#services",
    "title": "Consulting",
    "section": "Services",
    "text": "Services\n\n\n\n\n\nResearch design\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nDefining objectives,\nIdentifying the target population,\nDesigning indicators,\nDeveloping survey questionnaires, and\nPlanning the sampling design.\n\nExperience:\nI have experience working with questionnaires on victimization experiences and perceptions of insecurity across various Latin American countries, surveys assessing the socioeconomic conditions of both displaced and non-displaced households in Sudan, as well as the experiences of individuals and families before, during, and after armed conflicts in Nigeria, Niger, Chad, Cameroon, and Iraq.\n\n\n\n\n\n\n\nData management\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nIdentification of data sources;\nGathering data from various sources;\nCleaning, structuring, and transforming messy data into research-ready datasets; and,\nOrganizing and storing data.\n\nExperience:\nI have experience in data cleaning, as well as creating data dictionaries and metadata. Additionally, I have worked on integrating data from household surveys, administrative records, censuses, and remote sensing sources. When statistical information is unavailable, I have leveraged LLMs, web scraping, and text and data mining techniques to generate new datasets.\n\n\n\n\n\n\n\n\n\n\nStatistical analysis\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nLinear regression and nonlinear regression modeling;\nMachine learning predictive modelling;\nDisaggregated analyses; and,\nStatistical tests to assess differences between populations.\n\nExperience:\nI have experience analyzing and interpreting data on victimization, gender-based violence, food security, income poverty, displacement, and armed conflict. Additionally, I have also developed and examined hard-to-measure phenomena such as indicators for severity assessments and perception of social networks.\n\n\n\n\n\n\n\nData visualization\n\n\n\n\n\n\n\n\nRead more +\n\n\n\n\n\nTasks include:\n\nBuilding dynamic and interactive dashboards; and,\nCustom data visualizations.\n\nExperience:\nI have experience developing dynamic R Shiny dashboards and creating interactive visualizations using ggplot2, tidyplots, and Leaflet. My work includes designing choropleth maps and tailored data visualizations for reports, presentations, and academic publications."
  },
  {
    "objectID": "consulting/index.html#deliverables",
    "href": "consulting/index.html#deliverables",
    "title": "Consulting",
    "section": "Deliverables",
    "text": "Deliverables\nI am committed to reproducible research. Therefore, upon completing the consultancy, you will receive well-documented R scripts, along with R Markdown/Quarto files detailing each step of the work, clean datasets in the required format (Excel, CSV, SPSS, etc.), and/or an analytical report."
  },
  {
    "objectID": "consulting/index.html#lets-collaborate",
    "href": "consulting/index.html#lets-collaborate",
    "title": "Consulting",
    "section": "Let’s collaborate",
    "text": "Let’s collaborate\nIf you need support with data management, statistical analysis, visualization, or team training on these tasks, feel free to reach out at ja.torresmunguia@gmail.com! Let’s discuss how I can help you leverage your data for meaningful impact."
  },
  {
    "objectID": "about/index.html",
    "href": "about/index.html",
    "title": "Juan Torres Munguía, Ph.D.",
    "section": "",
    "text": "I am a consultant and independent researcher specializing in the management, analysis, and visualization of data related to humanitarian crises and most vulnerable populations.\nMy research combines statistics, machine learning algorithms, and data science methods to better understand how individuals, families, and communities experience, adapt to, and cope with phenomena such as armed conflict, violence, climate change, poverty, and displacement.\nI am also an R-enthusiast who loves coding to optimize and streamline my work. Check out my Blog, where I share insights on using R for the study of humanitarian and development economics data."
  },
  {
    "objectID": "blog/index.html",
    "href": "blog/index.html",
    "title": "Blog",
    "section": "",
    "text": "Using a tidy approach in R to analyze the 2024 Mexico’s ENVIPE\n\n\nPart 1: Estimating crime prevalence\n\n\n\ndata analysis\n\n\nofficial statistics\n\n\nMexico\n\n\nhousehold surveys\n\n\nENVIPE\n\n\ncrime\n\n\nvictimization\n\n\npublic safety\n\n\ntidyverse\n\n\nmicrodata\n\n\n\n\nJan 27, 2025\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "contact/index.html",
    "href": "contact/index.html",
    "title": "Juan TORRES MUNGUÍA | HUMANITARIAN DATA SCIENTIST",
    "section": "",
    "text": "You can use this space to contact me for queries, collaboration ideas, or comments.\n\n \n\n\n\n\n\n\n\nName \nEmail address \nMessage\n\n\nSend message"
  },
  {
    "objectID": "publications/peer_reviewed_papers/what_makes_an_epidemic_BMC_2025/index.html",
    "href": "publications/peer_reviewed_papers/what_makes_an_epidemic_BMC_2025/index.html",
    "title": "What makes an epidemic a disaster: the future of epidemics within the EM-DAT International Disaster Database",
    "section": "",
    "text": "Abstract\n\nReporting on and monitoring epidemics is a public health priority. Several initiatives and platforms provide epidemiological data, such as the EM-DAT International Disaster Database, which has 1525 epidemics and their impact reported since 1900, including 892 epidemics between 2000 and 2023. However, EM-DAT has inconsistent coverage and deficiencies regarding the systematic monitoring of epidemics data due to the lack of a standardized methodology to define what will be included under an epidemic disaster. We conducted a sequential study that included an online survey of experts in infectious diseases, public health emergencies, and related data, followed by committee discussions with disaster experts. This approach aimed to identify appropriate definitions and entry criteria for archiving disease outbreak events. The survey had 21 respondents from universities and international organizations, with experts primarily specialized in infectious disease surveillance. Experts agreed that epidemics should be considered as disasters. Experts cited challenges in defining epidemic thresholds. However, they proposed pathogen-based criteria and agreed that disruption to society, especially to the healthcare system, serves as a determinant of epidemic disasters. The experts favored deaths and confirmed cases as key indicators, alongside suggestions on refining EM-DAT’s entry criteria and improving epidemic impact assessment. This article offers valuable insights into epidemic disasters, a topic previously underdefined in the literature, thereby enhancing understanding for policymakers and public health professionals.\n\n\nCitation\n\nTonnelier, Margo; Delforge, Damien; Below, Regina; Torres Munguía, Juan Armando; Saegerman, Claude; Wathelet, Valentin; van Loenhout, Joris A. F.; Speybroeck, Niko (2025). What makes an epidemic a disaster: the future of epidemics within the EM-DAT International Disaster Database. BMC Public Health, 25 (1). DOI: 10.1186/s12889-024-21026-2\n\n\n  \n  \n     Download .bib file  (compatible with LaTeX)"
  },
  {
    "objectID": "blog/posts/data_visualization/how_to_maps/index.html",
    "href": "blog/posts/data_visualization/how_to_maps/index.html",
    "title": "Making interactive choropleths for disease outbreaks data using leaflet in R",
    "section": "",
    "text": "In these notes, you’ll learn how to load the data from the GitHub repository of the disease outbreaks project and use the leaflet library in R to create a choropleth map showing the geographic distribution of disease outbreaks from 1996 to September 30, 2024.\nThe final output will look like this:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStep 1: Load libraries\nThe following packages are required to replicate the choropleth map.\n\nlibrary(jsonlite)\nlibrary(tidyverse)\nlibrary(leaflet)\nlibrary(httr)\nlibrary(jsonlite)\nlibrary(RColorBrewer)\nlibrary(htmlwidgets)\nlibrary(htmltools)\nlibrary(sf)\nlibrary(bslib)\n\n\n\nStep 2: Load data from GitHub\nNow, let’s fetch the latest disease outbreaks data from the GitHub repository using the GitHub API. The file’s name changes according to the last update, having a pattern beginning with the prefix “outbreaks_”, followed by the date of last update. For instance, for the version updated on September 30, 2024, the corresponding .csv file is outbreaks_30092024.csv.\n\n# Define the GitHub raw content URL\nurl_api &lt;- \"https://api.github.com/repos/jatorresmunguia/disease_outbreak_news/contents/Last%20update\"\nlast_file &lt;- fromJSON(content(GET(url_api), as = \"text\"))$name[grepl(fromJSON(content(GET(url_api), as = \"text\"))$name, pattern = paste0(\"^outbreaks\"))]\n\nrdata_file &lt;- last_file[grepl(\".csv$\", last_file)]\nfile_name &lt;- basename(rdata_file)\ndate_string &lt;- sub(\".*_(\\\\d{2})(\\\\d{2})(\\\\d{4}).*\", \"\\\\1-\\\\2-\\\\3\", file_name)\ndate_obj &lt;- dmy(date_string)\n\nformatted_date &lt;- format(date_obj, \"%d/%m/%Y\")  \nformatted_month &lt;- format(date_obj, \"%B %d, %Y\")     \n\noutbreaks &lt;- read.csv(paste0(\"https://raw.githubusercontent.com/jatorresmunguia/disease_outbreak_news/refs/heads/main/Last%20update\", \"/\", rdata_file),\n                      header = TRUE)\n\n# Ensure no extra blanks in country names\noutbreaks &lt;- outbreaks |&gt;\n  mutate(across(c(icd104n, iso3, Country), \n                ~ factor(str_squish(as.character(.)))))\n\n\n\nStep 3: Load geospatial data\nTo produce the choropleth maps, it is required to get the country administrative boundaries from a geospatial object. In this tutorial, the shapefile located in our GitHub is used.\n\n# URL for the ZIP file containing the shapefile (administrative boundaries)\nurl_shp &lt;- \"/vsicurl/https://github.com/jatorresmunguia/outbreaks_dashboard/raw/main/Data/shp_outbreaks.shp\"\n\nshpsf &lt;- st_read(url_shp, quiet = TRUE)\n\n\n\nStep 4: Reshape the data\nHere, we summarize the outbreaks data by iso3 code, year, and disease, and calculate the total number of outbreaks per country, and reshape to long format.\n\nshpsf_unique &lt;- shpsf |&gt; \n  st_drop_geometry() |&gt;\n  distinct(iso3, .keep_all = TRUE)\n\noutbreaks &lt;- shpsf_unique |&gt;\n  select(iso3, continent) |&gt;\n  right_join(outbreaks, by = \"iso3\") \n\ndata_base &lt;- outbreaks |&gt; \n  # Group the data\n  group_by(iso3, Year, icd104n) |&gt; \n  # Summarize the number of outbreaks\n  summarise(count = n(), .groups = 'drop') |&gt; \n  # Reshape to wide format\n  pivot_wider(names_from = icd104n, values_from = count, values_fill = 0) \n\ndata_base &lt;- data_base |&gt; \n  # Replace missing values (NA) with 0\n  mutate(across(-c(iso3, Year), ~replace(., is.na(.), 0))) |&gt; \n  # Calculate the total outbreaks per country\n  mutate(`All diseases` = rowSums(across(-c(iso3, Year)))) |&gt; \n  # Reshape to long format\n  pivot_longer(!c(iso3, Year), names_to = \"Disease\", values_to = \"outbreaks\") \n\n\n\nStep 5: Add the geographic attributes to the outbreaks data\nAfter loading the shapefile containing the administrative boundaries for countries, we need to integrate this geographic information into the disease outbreaks data. To do this, we have to merge the data_base object with the shpsf using iso3 country codes as key variable.\n\noutbreaks_all &lt;- data_base |&gt; \n  # Filter the data to include only the \"All diseases\" category, which represents the total number of outbreaks per country.\n  # Here, you can also select a particular disease\n  filter(Disease == \"All diseases\") |&gt; \n  # Group the data by country code (iso3) and summarize the total number of outbreaks for each country.\n  group_by(iso3) |&gt; \n  summarise(outbreaks = sum(outbreaks)) |&gt; \n  # Perform a right join with the spatial data (`shpsf`) to combine the outbreak data with geographical boundaries.\n  right_join(shpsf, by = \"iso3\") |&gt; \n  # Convert the resulting data into a spatial data frame using `st_as_sf()` to prepare for mapping.\n  mutate(outbreaks = replace_na(outbreaks, 0)) |&gt;\n  st_as_sf()\n\nNote: You can also use filter(between(Year, left = , right = )) to exclusively include a subset of observations by specifying a date range. For example, setting left = 2010 and right = 2020 would filter the data to only include outbreaks that occurred between 2010 and 2020. This is useful when you want to focus on a specific time period within your dataset.\n\n\nStep 6: Making the interactive map\nTo create the interactive choropleth map using leaflet library, we first set up a palette to categorize the number of outbreaks into bins, which is essential for visual differentiation on the choropleth map.\n\n# Define the color palette with bins for categorizing outbreak numbers\nmybins &lt;- c(0, 10, 20, 30, 40, 50, 60, 70)\nmypalette &lt;- colorBin(palette = \"PuRd\", \n                      domain = outbreaks_all$outbreaks,\n                      na.color = \"transparent\", bins = mybins)\n\nThen, we create labels to display the country name and the number of outbreaks when hovering over the choropleth map.\n\n# Create labels for each country\nmytext &lt;- paste0(\"&lt;b&gt;\", outbreaks_all$Country, \"&lt;/b&gt;\", \"&lt;br/&gt;\",\n                outbreaks_all$outbreaks, \" \", \"outbreaks\"\n                ) |&gt; \n  lapply(htmltools::HTML)\n\nAdd a title for the map\n\n# Add map title\ntag.map.title &lt;- tags$style(HTML(\"\n  .leaflet-control.map-title { \n    left: 50%;  \n    transform: translateX(-50%);\n    text-align: left;\n    padding-left: 10px; \n    padding-right: 10px; \n    background: rgba(255,255,255,0.75);\n    font-weight: bold;\n    font-size: 20px;\n    color: black;\n  }\n\"))\n\n# Create the map\ntitle &lt;- tags$div(\n  tag.map.title, HTML(\"Geographic distribution of disease outbreaks, Jan 1996-Sep 2024\")\n)\n\nFinally, we set up the Leaflet map with tiles, polygons, labels, a legend, and a title.\nleaflet(outbreaks_all, options = leafletOptions(zoomControl = FALSE)) |&gt;\n  addTiles() |&gt; \n  addProviderTiles(providers$Esri.WorldTopoMap) |&gt;\n  setView(lat = 10, lng = 0, zoom = 2) |&gt;\n  # Add polygons for countries and their outbreak data\n  addPolygons(\n    fillColor = ~mypalette(outbreaks),\n    stroke = TRUE,\n    fillOpacity = 0.9,\n    color = \"white\",\n    weight = 0.3,\n    label = mytext,\n    labelOptions = labelOptions(\n      style = list(\"font-weight\" = \"normal\", padding = \"3px 8px\"),\n      textsize = \"13px\",\n      direction = \"auto\"\n    )\n  ) |&gt;\n  # Add a legend to explain the color scale\n  addLegend(\n    pal = mypalette, values = ~outbreaks, opacity = 0.9,\n    title = \"Number of outbreaks:\",\n    position = \"bottomleft\"\n  ) |&gt;\n  # Add the title to the map\n  addControl(title, position = \"topleft\", className = \"map-title\") |&gt;\n  # Re-add the zoom control to the top-right corner\n  onRender(\"function(el, x) {\n          L.control.zoom({position:'topright'}).addTo(this);\n          }\")\n\n\nNote: You can add card(full_screen = TRUE) from bslib library to add an icon to expand the card’s size to the browser window."
  },
  {
    "objectID": "blog/posts/data_analysis/estimating_official_survey_data_mx/index.html",
    "href": "blog/posts/data_analysis/estimating_official_survey_data_mx/index.html",
    "title": "Using a tidy approach in R to analyze the 2024 Mexico’s ENVIPE",
    "section": "",
    "text": "Overview\nIn this article, I will walk you through the steps of analyzing the 2024 Mexico’s National Survey of Victimization and Perception of Public Safety (ENVIPE) by using the tidyverse framework. At the end, you will be able to apply this collection of packages to:\n\nLoad the survey microdata from INEGI’s website\nSpecify the ENVIPE’s survey design\nCalculate point estimates and standard errors\nTabulate main results\n\n\n\nAbout the ENVIPE\nThe ENVIPE is an official survey that collects national and state level representative information on the household experiences crime victimization and their perceptions of public safety in Mexico. The ENVIPE is conducted annually by the National Institute of Statistics and Geography (INEGI) since 2011.\nAll the information related to the survey, including questionnaires, methodology, glossary of terms, summaries, and microdata is fully available at INEGI’s website.\n\n\nSet-up\nFirst, you will need to install and load the following packages to use the R code in this post:\n\nlibrary(tidyverse) # for tidy framework\nlibrary(survey) # analysis of survey data\nlibrary(srvyr) # tidy syntax for analysis of survey data\n\nlibrary(archive) # to extract files from a zip folder\n\n\n\nLoad the survey microdata from INEGI’s website\nMicrodata can be found at https://www.inegi.org.mx/programas/envipe/2024/#microdatos in different formats, including csv, dbf, dta, sav, and RData. I choose to work with RData files.\n\nload(archive_read(\"https://www.inegi.org.mx/contenidos/programas/envipe/2024/microdatos/bd_envipe_2024_RData.zip\"))\n\n\n\n\n\n\n\nTip\n\n\n\nAs you can see, by using the archive package it is possible to read the single file from bd_envipe_2024_RData.zip in a direct way.\n\n\nAfter this, we have the following objects in the global environment:\n\nTHogar: This object contains the interview result, the row of the selected respondent, the household factor, and other household characteristics.\nTMod_Vic: This object includes information on the crimes suffered by the selected respondent and their household during the reference year, specifically during 2023.\nTPer_Vic1: This object includes information related to the perception of public security within the respondent’s geographic area, antisocial behaviors in their immediate surroundings, and changes in habits due to fear of becoming a crime victim in 2023. Additionally, it presents information regarding the performance of authorities and trust in them. In other words, this table covers Sections IV and V of the main questionnaire.\nTPer_Vic2: This object consolidates information related to household and personal victimization, particularly focusing on high-impact crimes experienced by the household (such as kidnapping, enforced disappearance, or homicide) or by the selected respondent. This table includes Sections VI and VII of the main questionnaire.\nTSDem: This object contains the socio-demographic characteristics of household members, corresponding to Section III of the main questionnaire.\nTSVivienda: This object contains the characteristics of the households captured through the questionnaire cover page, as well as the count of household residents and the number of households. In other words, it includes Sections I and II of the main questionnaire.\n\n\n\nSpecify the ENVIPE’s survey design\nENVIPE’s survey scheme is a probabilistic, three-stage, stratified, and cluster sampling. Observation unit is the selected private household, the households, the household residents, and the selected person within the household. The sampling unit are the households. The unit of analysis are the population aged 18 and older residing in the selected private households in the sample. More information about this can be found in the following documents (only in Spanish):\n\nSampling design\n\n\n\nCalculate point estimates and standard errors\n\nCrime prevalence rate per one hundred thousand inhabitants by state and by victim’s sex\nLet’s first recreate the prevalence rate estimates by state and by victim’s sex. To achieve this, we use TPer_Vic2 (household and personal victimization) and TSDem (socio-demographic characteristics of household members).\n\nid_victims &lt;- TMod_Vic |&gt;\n  filter(BPCOD != \"03\") |&gt;\n  pull(ID_PER)\n\nTPer_Vic2 &lt;- TPer_Vic2 |&gt; \n  mutate(FAC_ELE = as.numeric(FAC_ELE))\n\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(victim = case_when(\n    ID_PER %in% id_victims ~ 1, \n    TRUE ~ 0\n  ))\n\nenvipe_design &lt;- TPer_Vic2 |&gt;\n  as_survey_design(weights = FAC_ELE,\n                   strata = EST_DIS,\n                   ids = UPM_DIS,\n                   nest = TRUE)\n\nenvipe_design |&gt;\n  survey_count(victim, name = \"Absolutos\")\n\n# A tibble: 2 × 3\n  victim Absolutos Absolutos_se\n   &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;\n1      0  72105299      366104.\n2      1  21932301      239427.\n\nenvipe_design |&gt;\n  group_by(NOM_ENT) |&gt;\n  survey_count(victim, name = \"Absolute\") |&gt;\n  mutate(`Total population aged 18 and over` = sum(Absolute)) |&gt;\n  mutate(`Proportion` = Absolute/`Total population aged 18 and over`*100) |&gt;\n  ungroup() |&gt;\n  filter(victim == 1) |&gt;\n  select()\n\n# A tibble: 32 × 0\n\nenvipe_design |&gt;\n  group_by(NOM_ENT) |&gt;\n  summarize(\n    Proportion = survey_mean(victim),\n    N = survey_total(victim)\n  )\n\n# A tibble: 32 × 5\n   NOM_ENT              Proportion Proportion_se       N   N_se\n   &lt;chr&gt;                     &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n 1 AGUASCALIENTES            0.328       0.0136   342231 16291.\n 2 BAJA CALIFORNIA           0.238       0.0117   658657 32075.\n 3 BAJA CALIFORNIA SUR       0.216       0.0100   139622  8402.\n 4 CAMPECHE                  0.226       0.0102   152787  7574.\n 5 CHIAPAS                   0.141       0.00743  507741 26588.\n 6 CHIHUAHUA                 0.226       0.00848  632297 25743.\n 7 CIUDAD DE MEXICO          0.325       0.00754 2473701 62817.\n 8 COAHUILA DE ZARAGOZA      0.194       0.00904  463234 21934.\n 9 COLIMA                    0.212       0.0101   115624  6001.\n10 DURANGO                   0.164       0.00788  216134 11716.\n# ℹ 22 more rows\n\nenvipe_design |&gt;\n  group_by(interact(NOM_ENT, SEXO)) |&gt;\n  summarize(\n    Proportion = survey_mean(victim),\n    N = survey_total(victim)\n  )\n\n# A tibble: 64 × 6\n   NOM_ENT             SEXO  Proportion Proportion_se      N   N_se\n   &lt;chr&gt;               &lt;chr&gt;      &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1 AGUASCALIENTES      1          0.337       0.0217  159381 12234.\n 2 AGUASCALIENTES      2          0.320       0.0183  182850 12013.\n 3 BAJA CALIFORNIA     1          0.230       0.0160  303760 21785.\n 4 BAJA CALIFORNIA     2          0.245       0.0154  354897 24430.\n 5 BAJA CALIFORNIA SUR 1          0.193       0.0124   61094  4576.\n 6 BAJA CALIFORNIA SUR 2          0.238       0.0147   78528  6060.\n 7 CAMPECHE            1          0.218       0.0146   69975  5338.\n 8 CAMPECHE            2          0.232       0.0138   82812  5139.\n 9 CHIAPAS             1          0.166       0.00986 271846 17451.\n10 CHIAPAS             2          0.121       0.00979 235895 18467.\n# ℹ 54 more rows"
  },
  {
    "objectID": "blog/index.html#journal-articles",
    "href": "blog/index.html#journal-articles",
    "title": "Juan TORRES MUNGUÍA | HUMANITARIAN DATA SCIENTIST",
    "section": "Journal articles",
    "text": "Journal articles"
  },
  {
    "objectID": "blog/index.html#working-papers",
    "href": "blog/index.html#working-papers",
    "title": "Juan TORRES MUNGUÍA | HUMANITARIAN DATA SCIENTIST",
    "section": "Working papers",
    "text": "Working papers"
  },
  {
    "objectID": "blog/data_analysis/estimating_official_survey_data_mx/index.html",
    "href": "blog/data_analysis/estimating_official_survey_data_mx/index.html",
    "title": "Using a tidy approach in R to analyze the 2024 Mexico’s ENVIPE",
    "section": "",
    "text": "Overview\nIn this article, I will walk you through the steps of analyzing the 2024 Mexico’s National Survey of Victimization and Perception of Public Safety (ENVIPE) by using the tidyverse framework. At the end, you will be able to apply this collection of packages to:\n\nLoad the survey microdata from INEGI’s website\nSpecify the ENVIPE’s survey design\nCalculate point estimates and standard errors\nTabulate main results\n\n\n\nAbout the ENVIPE\nThe ENVIPE is an official survey that collects national and state level representative information on the household experiences crime victimization and their perceptions of public safety in Mexico. The ENVIPE is conducted annually by the National Institute of Statistics and Geography (INEGI) since 2011.\nAll the information related to the survey, including questionnaires, methodology, glossary of terms, summaries, and microdata is fully available at INEGI’s website.\n\n\nSet-up\nFirst, you will need to install and load the following packages to use the R code in this post:\n\nlibrary(tidyverse) # for tidy framework\nlibrary(survey) # analysis of survey data\nlibrary(srvyr) # tidy syntax for analysis of survey data\n\nlibrary(archive) # to extract files from a zip folder\n\n\n\nLoad the survey microdata from INEGI’s website\nMicrodata can be found at https://www.inegi.org.mx/programas/envipe/2024/#microdatos in different formats, including csv, dbf, dta, sav, and RData. I choose to work with RData files.\n\nload(archive_read(archive = \"https://www.inegi.org.mx/contenidos/programas/envipe/2024/microdatos/bd_envipe_2024_RData.zip\",\n                  file = \"BD_ENVIPE_2024.RData\"))\n\n\n\n\n\n\n\nTip\n\n\n\nAs you can see, by using the archive package it is possible to read the single file from bd_envipe_2024_RData.zip in a direct way.\n\n\nAfter this, we have the following objects in the global environment:\n\nTHogar: This object contains the interview result, the row of the selected respondent, the household factor, and other household characteristics.\nTMod_Vic: This object includes information on the crimes suffered by the selected respondent and their household during the reference year, specifically during 2023.\nTPer_Vic1: This object includes information related to the perception of public security within the respondent’s geographic area, antisocial behaviors in their immediate surroundings, and changes in habits due to fear of becoming a crime victim in 2023. Additionally, it presents information regarding the performance of authorities and trust in them. In other words, this table covers Sections IV and V of the main questionnaire.\nTPer_Vic2: This object consolidates information related to household and personal victimization, particularly focusing on high-impact crimes experienced by the household (such as kidnapping, enforced disappearance, or homicide) or by the selected respondent. This table includes Sections VI and VII of the main questionnaire.\nTSDem: This object contains the socio-demographic characteristics of household members, corresponding to Section III of the main questionnaire.\nTSVivienda: This object contains the characteristics of the households captured through the questionnaire cover page, as well as the count of household residents and the number of households. In other words, it includes Sections I and II of the main questionnaire.\n\n\n\nSpecify the ENVIPE’s survey design\nENVIPE’s survey scheme is a probabilistic, three-stage, stratified, and cluster sampling. Observation unit is the selected private household, the households, the household residents, and the selected person within the household. The sampling unit are the households. The unit of analysis are the population aged 18 and older residing in the selected private households in the sample. More information about this can be found in the following documents (only in Spanish):\n\nSampling design\n\n\n\nCalculate point estimates and standard errors\n\nCrime prevalence rate per one hundred thousand inhabitants by state and by victim’s sex\nLet’s first recreate the prevalence rate estimates by state and by victim’s sex. To achieve this, we use TPer_Vic2 (household and personal victimization) and TSDem (socio-demographic characteristics of household members).\n\nid_victims &lt;- TMod_Vic |&gt;\n  filter(BPCOD != \"03\") |&gt;\n  pull(ID_PER)\n\nTPer_Vic2 &lt;- TPer_Vic2 |&gt; \n  mutate(FAC_ELE = as.numeric(FAC_ELE))\n\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(victim = case_when(\n    ID_PER %in% id_victims ~ 1, \n    TRUE ~ 0\n  ))\n\nenvipe_design &lt;- TPer_Vic2 |&gt;\n  as_survey_design(weights = FAC_ELE,\n                   strata = EST_DIS,\n                   ids = UPM_DIS,\n                   nest = TRUE)\n\nenvipe_design |&gt;\n  survey_count(victim, name = \"Absolutos\")\n\n# A tibble: 2 × 3\n  victim Absolutos Absolutos_se\n   &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;\n1      0  72105299      366104.\n2      1  21932301      239427.\n\nenvipe_design |&gt;\n  group_by(NOM_ENT) |&gt;\n  survey_count(victim, name = \"Absolute\") |&gt;\n  mutate(`Total population aged 18 and over` = sum(Absolute)) |&gt;\n  mutate(`Proportion` = Absolute/`Total population aged 18 and over`*100) |&gt;\n  ungroup() |&gt;\n  filter(victim == 1) |&gt;\n  select()\n\n# A tibble: 32 × 0\n\nenvipe_design |&gt;\n  group_by(NOM_ENT) |&gt;\n  summarize(\n    Proportion = survey_mean(victim),\n    N = survey_total(victim)\n  )\n\n# A tibble: 32 × 5\n   NOM_ENT              Proportion Proportion_se       N   N_se\n   &lt;chr&gt;                     &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n 1 AGUASCALIENTES            0.328       0.0136   342231 16291.\n 2 BAJA CALIFORNIA           0.238       0.0117   658657 32075.\n 3 BAJA CALIFORNIA SUR       0.216       0.0100   139622  8402.\n 4 CAMPECHE                  0.226       0.0102   152787  7574.\n 5 CHIAPAS                   0.141       0.00743  507741 26588.\n 6 CHIHUAHUA                 0.226       0.00848  632297 25743.\n 7 CIUDAD DE MEXICO          0.325       0.00754 2473701 62817.\n 8 COAHUILA DE ZARAGOZA      0.194       0.00904  463234 21934.\n 9 COLIMA                    0.212       0.0101   115624  6001.\n10 DURANGO                   0.164       0.00788  216134 11716.\n# ℹ 22 more rows\n\nenvipe_design |&gt;\n  group_by(interact(NOM_ENT, SEXO)) |&gt;\n  summarize(\n    Proportion = survey_mean(victim),\n    N = survey_total(victim)\n  )\n\n# A tibble: 64 × 6\n   NOM_ENT             SEXO  Proportion Proportion_se      N   N_se\n   &lt;chr&gt;               &lt;chr&gt;      &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1 AGUASCALIENTES      1          0.337       0.0217  159381 12234.\n 2 AGUASCALIENTES      2          0.320       0.0183  182850 12013.\n 3 BAJA CALIFORNIA     1          0.230       0.0160  303760 21785.\n 4 BAJA CALIFORNIA     2          0.245       0.0154  354897 24430.\n 5 BAJA CALIFORNIA SUR 1          0.193       0.0124   61094  4576.\n 6 BAJA CALIFORNIA SUR 2          0.238       0.0147   78528  6060.\n 7 CAMPECHE            1          0.218       0.0146   69975  5338.\n 8 CAMPECHE            2          0.232       0.0138   82812  5139.\n 9 CHIAPAS             1          0.166       0.00986 271846 17451.\n10 CHIAPAS             2          0.121       0.00979 235895 18467.\n# ℹ 54 more rows\n\n\n\n\n\n\n\nCitationBibTeX citation:@online{armando torres munguía2025,\n  author = {Armando Torres Munguía, Juan},\n  title = {Using a Tidy Approach in {R} to Analyze the 2024 {Mexico’s}\n    {ENVIPE}},\n  date = {2025-01-27},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nArmando Torres Munguía, Juan. 2025. “Using a Tidy Approach in R to\nAnalyze the 2024 Mexico’s ENVIPE.” January 27, 2025."
  },
  {
    "objectID": "blog/index.html#data-analysis",
    "href": "blog/index.html#data-analysis",
    "title": "Blog",
    "section": "",
    "text": "Part 1: Estimating crime prevalence\n\n\n\n\n\n\n\n\nJan 27, 2025\n\n\nJuan Armando Torres Munguía\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blog/posts/estimating_official_survey_data_mx/index.html",
    "href": "blog/posts/estimating_official_survey_data_mx/index.html",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "",
    "text": "In this article, I will guide you through the process of analyzing Mexico’s 2024 National Survey of Victimization and Perception of Public Safety (Encuesta Nacional de Victimización y Percepción sobre Seguridad Pública, ENVIPE) using the tidyverse framework for survey analysis with the srvyr package. Specifically, we will calculate the crime prevalence rate per 100,000 inhabitants by state, according to the victim’s sex ( Tasa de prevalencia delictiva por entidad federativa por cada cien mil habitantes, según sexo de la víctima).\nOfficial tables with this indicator can be found here.\nBy the end of this article, you will be able to use the tidyverse to:\n\nLoad the survey microdata from INEGI’s website.\nSpecify the ENVIPE survey design.\nCalculate crime prevalence indicators."
  },
  {
    "objectID": "blog/posts/estimating_official_survey_data_mx/index.html#overview",
    "href": "blog/posts/estimating_official_survey_data_mx/index.html#overview",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "",
    "text": "In this article, I will guide you through the process of analyzing Mexico’s 2024 National Survey of Victimization and Perception of Public Safety (Encuesta Nacional de Victimización y Percepción sobre Seguridad Pública, ENVIPE) using the tidyverse framework for survey analysis with the srvyr package. Specifically, we will calculate the crime prevalence rate per 100,000 inhabitants by state, according to the victim’s sex ( Tasa de prevalencia delictiva por entidad federativa por cada cien mil habitantes, según sexo de la víctima).\nOfficial tables with this indicator can be found here.\nBy the end of this article, you will be able to use the tidyverse to:\n\nLoad the survey microdata from INEGI’s website.\nSpecify the ENVIPE survey design.\nCalculate crime prevalence indicators."
  },
  {
    "objectID": "blog/posts/estimating_official_survey_data_mx/index.html#about-the-envipe",
    "href": "blog/posts/estimating_official_survey_data_mx/index.html#about-the-envipe",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "About the ENVIPE",
    "text": "About the ENVIPE\nENVIPE is an official survey that provides nationally and state-representative information on household crime victimization and perceptions of public safety in Mexico. Conducted annually since 2011 by the National Institute of Statistics and Geography (INEGI), ENVIPE collects data on the following crimes:\n\n\n\nTotal vehicle theft (car, pickup truck, or truck).\nTheft of vehicle accessories, spare parts, or tools (car, pickup truck, or truck).\nWall graffiti, intentional vehicle damage, and other types of vandalism.\nBurglary or attempted burglary.\nKidnapping.\nEnforced disappearance.\nHomicide.\nRobbery or assault on the street or public transportation.\n\n\n\nTheft in a manner different from the above.\nBank fraud.\nConsumer fraud.\nExtortion.\nThreats.\nInjuries.\nKidnapping.\nHarassment or intimidation.\nGroping.\nExhibitionism.\nAttempted rape.\nSexual rape.\nOther crimes.\n\n\n\nAll survey-related information, including questionnaires, methodology, glossaries, summaries, and microdata, is fully available at INEGI’s website."
  },
  {
    "objectID": "blog/posts/estimating_official_survey_data_mx/index.html#set-up",
    "href": "blog/posts/estimating_official_survey_data_mx/index.html#set-up",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "Set-up",
    "text": "Set-up\nFirst, install and load the required packages:\n\nlibrary(tidyverse) # Tidy data analysis framework\nlibrary(srvyr) # Tidy syntax for survey data analysis\nlibrary(archive) # Extract files from a ZIP archive\nlibrary(kableExtra) # Create HTML table"
  },
  {
    "objectID": "blog/posts/estimating_official_survey_data_mx/index.html#loading-survey-microdata-from-inegi",
    "href": "blog/posts/estimating_official_survey_data_mx/index.html#loading-survey-microdata-from-inegi",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "Loading survey microdata from INEGI",
    "text": "Loading survey microdata from INEGI\nMicrodata is available here in various formats (CSV, DBF, DTA, SAV, and RData). In this post, we will use the RData files.\n\nload(archive_read(\n  archive = \"https://www.inegi.org.mx/contenidos/programas/envipe/2024/microdatos/bd_envipe_2024_RData.zip\",\n  file = \"BD_ENVIPE_2024.RData\"\n))\n\n\n\n\n\n\n\nTip\n\n\n\nUsing the archive package, we can directly extract the required file from bd_envipe_2024_RData.zip.\n\n\nThis loads the following objects into the global environment:\n\nTHogar: This object contains the interview result, the row of the selected respondent, the household factor, and other household characteristics.\nTMod_Vic: This object includes information on the crimes suffered by the selected respondent and their household during the reference year, specifically during 2023. Information comes from the victimization module of the survey.\nTPer_Vic1: This object includes information related to the perception of public security within the respondent’s geographic area, antisocial behaviors in their immediate surroundings, and changes in habits due to fear of becoming a crime victim in 2023. Additionally, it presents information regarding the performance of authorities and trust in them. In other words, this table covers Sections IV and V of the main questionnaire.\nTPer_Vic2: This object consolidates information related to household and personal victimization, particularly focusing on high-impact crimes experienced by the household (such as kidnapping, enforced disappearance, or homicide) or by the selected respondent. This table includes Sections VI and VII of the main questionnaire.\nTSDem: This object contains the socio-demographic characteristics of household members, corresponding to Section III of the main questionnaire.\nTSVivienda: This object contains the characteristics of the households captured through the questionnaire cover page, as well as the count of household residents and the number of households. In other words, it includes Sections I and II of the main questionnaire."
  },
  {
    "objectID": "blog/posts/estimating_official_survey_data_mx/index.html#calculating-crime-prevalence-indicators",
    "href": "blog/posts/estimating_official_survey_data_mx/index.html#calculating-crime-prevalence-indicators",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "Calculating crime prevalence indicators",
    "text": "Calculating crime prevalence indicators\nTo estimate crime prevalence, we use information from TPer_Vic2 (screening questions on victimization from the main questionnaire) and TMod_Vic (specific victimization module applied to the respondents who reported being a victim of at least one of the crimes included in the survey during the reference period). TPer_Vic2 will serve to characterize the total population and TMod_Vic to describe the victims and the associated crimes.\n\n1. Specifying the ENVIPE survey design\nENVIPE follows a probabilistic, three-stage, stratified, and clustered sampling design. The sampling unit is the household, while the unit of analysis is the population aged 18 and older in selected households. More details on the sampling design can be found here(in Spanish).\nFrom the documentation on data structure(in Spanish), the key variables for specifying the survey design are:\n\nID_PER: Person identifier\nEST_DIS: Stratum\nUPM_DIS: Primary sampling unit\nFAC_ELE: Weighting factor for public security perception and victimization estimates.\n\nWe specify the survey design as follows:\n\n# Identify victims from TMod_Vic, excluding \n# \"Wall graffiti, intentional vehicle damage, and other vandalism\" (BPCOD != \"03\")\nid_victims &lt;- TMod_Vic |&gt;\n  filter(BPCOD != \"03\") |&gt;\n  pull(ID_PER)\n\n# Create victimization variable in TPer_Vic2\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(victimization = ifelse(ID_PER %in% id_victims, 1, 0))\n\n# Convert FAC_ELE (weights) to numeric\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(FAC_ELE = as.numeric(FAC_ELE))\n\n# Label SEXO variable\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(SEXO = recode(SEXO, \"1\" = \"Man\", \"2\" = \"Woman\"))\n\n# Create survey object\nenvipe_design &lt;- TPer_Vic2 |&gt;\n  as_survey_design(\n    weights = FAC_ELE, # Weights (inverse probability)\n    strata = EST_DIS, # Stratum\n    ids = UPM_DIS, # Primary sampling unit\n    nest = TRUE # Nesting within strata\n  )\n\n\n\n2. Calculating point estimates and variablity indicators for the crime prevalence rate per 100,000 thousand inhabitants by state, according to the victim’s sex\nTo compute proportions from survey data, we use survey_mean() from srvyr package. From ENVIPE’s documentation, we know that NOM_ENT represents the state, while SEXO corresponds to the respondent’s sex.\n\nenvipe_design |&gt;\n  # `interact` function is used to calculate the proportion \n  # over the interaction of state and sex\n  group_by(interact(NOM_ENT, SEXO)) |&gt;\n  summarize(\n    Proportion = survey_mean(victimization,\n      level = 0.90, # Confidence level\n      vartype = c(\"se\", \"ci\", \"cv\") # Variability indicators\n    )\n  ) |&gt;\n  ungroup() |&gt;\n  mutate(\n    `Prevalence rate` = Proportion * 100000, # Rate per 100,000 people\n    `Standard error` = Proportion_se * 100000,\n    `Low 90% CI` = Proportion_low * 100000,\n    `Upper 90% CI` = Proportion_upp * 100000,\n    `Coefficient of variation %` = Proportion_cv * 100,\n    State = str_to_sentence(NOM_ENT) # Capitalize only the first letter\n  ) |&gt;\n  rename(Sex = SEXO) |&gt;\n  select(State, Sex, `Prevalence rate`, `Standard error`, \n         `Low 90% CI`, `Upper 90% CI`, `Coefficient of variation %`) |&gt;\n  kbl() |&gt; # HTML table\n  kable_styling() # Apply bootstrap theme to the table\n\nThe output table looks like this:\n\n\n\n\n\nState\nSex\nPrevalence rate\nStandard error\nLow 90% CI\nUpper 90% CI\nCoefficient of variation %\n\n\n\n\nAguascalientes\nMan\n33710.81\n2172.7372\n30136.71\n37284.91\n6.445224\n\n\nAguascalientes\nWoman\n32041.57\n1831.7081\n29028.45\n35054.68\n5.716662\n\n\nBaja California\nMan\n23043.35\n1604.9769\n20403.20\n25683.50\n6.965032\n\n\nBaja California\nWoman\n24480.64\n1536.1771\n21953.66\n27007.61\n6.275070\n\n\nBaja California Sur\nMan\n19329.94\n1244.1353\n17283.36\n21376.51\n6.436314\n\n\nBaja California Sur\nWoman\n23817.58\n1466.2963\n21405.56\n26229.60\n6.156361\n\n\nCampeche\nMan\n21832.87\n1455.8508\n19438.03\n24227.71\n6.668161\n\n\nCampeche\nWoman\n23213.74\n1381.0933\n20941.88\n25485.61\n5.949465\n\n\nChiapas\nMan\n16602.99\n986.0052\n14981.03\n18224.94\n5.938722\n\n\nChiapas\nWoman\n12074.36\n978.7862\n10464.28\n13684.44\n8.106318\n\n\nChihuahua\nMan\n22303.22\n1234.5065\n20272.49\n24333.96\n5.535103\n\n\nChihuahua\nWoman\n22804.31\n1181.0327\n20861.54\n24747.08\n5.178990\n\n\nCiudad De Mexico\nMan\n34562.66\n1089.2714\n32770.84\n36354.49\n3.151584\n\n\nCiudad De Mexico\nWoman\n30746.76\n990.3528\n29117.66\n32375.87\n3.220999\n\n\nCoahuila De Zaragoza\nMan\n18179.70\n1249.1422\n16124.89\n20234.51\n6.871084\n\n\nCoahuila De Zaragoza\nWoman\n20447.19\n1238.7111\n18409.54\n22484.84\n6.058099\n\n\nColima\nMan\n21106.85\n1593.5970\n18485.43\n23728.28\n7.550140\n\n\nColima\nWoman\n21295.28\n1351.1455\n19072.68\n23517.88\n6.344813\n\n\nDurango\nMan\n15240.74\n1133.1868\n13376.67\n17104.80\n7.435250\n\n\nDurango\nWoman\n17401.18\n1166.0910\n15482.99\n19319.37\n6.701219\n\n\nGuanajuato\nMan\n20057.38\n1428.0981\n17708.20\n22406.57\n7.120063\n\n\nGuanajuato\nWoman\n18930.15\n1287.0811\n16812.93\n21047.37\n6.799107\n\n\nGuerrero\nMan\n16981.89\n1494.6554\n14523.22\n19440.56\n8.801466\n\n\nGuerrero\nWoman\n14572.44\n1238.6234\n12534.93\n16609.94\n8.499769\n\n\nHidalgo\nMan\n22397.82\n1338.0474\n20196.77\n24598.88\n5.974006\n\n\nHidalgo\nWoman\n20215.02\n1157.0294\n18311.73\n22118.30\n5.723613\n\n\nJalisco\nMan\n24390.13\n1548.7916\n21842.40\n26937.85\n6.350076\n\n\nJalisco\nWoman\n25141.90\n1438.5170\n22775.58\n27508.23\n5.721592\n\n\nMexico\nMan\n32906.59\n1632.3183\n30221.47\n35591.71\n4.960460\n\n\nMexico\nWoman\n33023.78\n1483.3471\n30583.71\n35463.85\n4.491755\n\n\nMichoacan De Ocampo\nMan\n14405.17\n1031.1125\n12709.01\n16101.32\n7.157934\n\n\nMichoacan De Ocampo\nWoman\n15485.20\n1036.3320\n13780.46\n17189.94\n6.692401\n\n\nMorelos\nMan\n26995.43\n1517.6054\n24499.00\n29491.85\n5.621713\n\n\nMorelos\nWoman\n24869.74\n1688.5969\n22092.04\n27647.44\n6.789765\n\n\nNayarit\nMan\n16075.56\n1516.6195\n13580.76\n18570.36\n9.434318\n\n\nNayarit\nWoman\n18639.61\n1597.1842\n16012.28\n21266.94\n8.568766\n\n\nNuevo Leon\nMan\n23602.12\n1261.9498\n21526.25\n25678.00\n5.346764\n\n\nNuevo Leon\nWoman\n21440.72\n1211.6372\n19447.60\n23433.83\n5.651104\n\n\nOaxaca\nMan\n12940.56\n1158.2366\n11035.29\n14845.83\n8.950434\n\n\nOaxaca\nWoman\n13548.61\n1017.7020\n11874.51\n15222.70\n7.511489\n\n\nPuebla\nMan\n26519.64\n1342.0473\n24312.00\n28727.27\n5.060579\n\n\nPuebla\nWoman\n24176.45\n1124.4656\n22326.73\n26026.17\n4.651078\n\n\nQueretaro\nMan\n30297.50\n1620.6534\n27631.57\n32963.44\n5.349132\n\n\nQueretaro\nWoman\n25746.31\n1260.3524\n23673.06\n27819.56\n4.895273\n\n\nQuintana Roo\nMan\n22592.04\n1384.4250\n20314.70\n24869.39\n6.127932\n\n\nQuintana Roo\nWoman\n21775.64\n1237.8095\n19739.48\n23811.81\n5.684376\n\n\nSan Luis Potosi\nMan\n24019.02\n1874.7438\n20935.11\n27102.93\n7.805247\n\n\nSan Luis Potosi\nWoman\n23227.97\n1491.3111\n20774.80\n25681.14\n6.420324\n\n\nSinaloa\nMan\n21181.44\n1122.0160\n19335.76\n23027.13\n5.297165\n\n\nSinaloa\nWoman\n20562.22\n1086.2790\n18775.32\n22349.12\n5.282887\n\n\nSonora\nMan\n26864.66\n1816.2677\n23876.94\n29852.37\n6.760808\n\n\nSonora\nWoman\n25742.16\n1902.0264\n22613.37\n28870.95\n7.388759\n\n\nTabasco\nMan\n25881.72\n1354.6212\n23653.40\n28110.04\n5.233891\n\n\nTabasco\nWoman\n25522.45\n1091.8488\n23726.38\n27318.51\n4.277994\n\n\nTamaulipas\nMan\n17788.15\n1075.8038\n16018.47\n19557.82\n6.047869\n\n\nTamaulipas\nWoman\n18368.67\n1017.1639\n16695.46\n20041.88\n5.537493\n\n\nTlaxcala\nMan\n23968.33\n1621.2198\n21301.47\n26635.20\n6.764007\n\n\nTlaxcala\nWoman\n22295.82\n1473.2391\n19872.38\n24719.26\n6.607692\n\n\nVeracruz De Ignacio De La Llave\nMan\n16365.05\n1055.8247\n14628.24\n18101.86\n6.451705\n\n\nVeracruz De Ignacio De La Llave\nWoman\n14712.45\n947.9121\n13153.15\n16271.74\n6.442927\n\n\nYucatan\nMan\n20677.82\n1239.0909\n18639.55\n22716.10\n5.992366\n\n\nYucatan\nWoman\n17805.62\n1141.8291\n15927.34\n19683.90\n6.412745\n\n\nZacatecas\nMan\n17328.49\n1346.8466\n15112.96\n19544.02\n7.772440\n\n\nZacatecas\nWoman\n15690.25\n1335.9463\n13492.65\n17887.85\n8.514502"
  },
  {
    "objectID": "blog/posts/estimating_official_survey_data_mx/index.html#calculating-crime-prevalence-rate-per-100000-thousand-inhabitants-by-state-according-to-the-victims-sex",
    "href": "blog/posts/estimating_official_survey_data_mx/index.html#calculating-crime-prevalence-rate-per-100000-thousand-inhabitants-by-state-according-to-the-victims-sex",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "Calculating crime prevalence rate per 100,000 thousand inhabitants by state, according to the victim’s sex",
    "text": "Calculating crime prevalence rate per 100,000 thousand inhabitants by state, according to the victim’s sex\nTo estimate the crime prevalence rate, we use information from TPer_Vic2 (screening questions on victimization from the main questionnaire) and TMod_Vic (specific victimization module applied to the respondents who reported being a victim of at least one of the crimes included in the survey during the reference period). TPer_Vic2 will serve to characterize the total population and TMod_Vic to describe the victims and the associated crimes.\n\n1. Specifying the ENVIPE survey design\nENVIPE follows a probabilistic, three-stage, stratified, and clustered sampling design. The sampling unit is the household, while the unit of analysis is the population aged 18 and older in selected households. More details on the sampling design can be found here(in Spanish).\nFrom the documentation on data structure(in Spanish), the key variables for specifying the survey design are:\n\nID_PER: Person identifier\nEST_DIS: Stratum\nUPM_DIS: Primary sampling unit\nFAC_ELE: Weighting factor for public security perception and victimization estimates.\n\nWe specify the survey design as follows:\n\n# Identify victims from TMod_Vic, excluding \n# \"Wall graffiti, intentional vehicle damage, and other vandalism\" (BPCOD != \"03\")\nid_victims &lt;- TMod_Vic |&gt;\n  filter(BPCOD != \"03\") |&gt;\n  pull(ID_PER)\n\n# Create victimization variable in TPer_Vic2\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(victimization = ifelse(ID_PER %in% id_victims, 1, 0))\n\n# Convert FAC_ELE (weights) to numeric\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(FAC_ELE = as.numeric(FAC_ELE))\n\n# Label SEXO variable\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(SEXO = recode(SEXO, \"1\" = \"Man\", \"2\" = \"Woman\"))\n\n# Create survey object\nenvipe_design &lt;- TPer_Vic2 |&gt;\n  as_survey_design(\n    weights = FAC_ELE, # Weights (inverse probability)\n    strata = EST_DIS, # Stratum\n    ids = UPM_DIS, # Primary sampling unit\n    nest = TRUE # Nesting within strata\n  )\n\n\n\n2. Calculating point estimates and variablity indicators\nTo compute proportions from survey data, we use survey_mean() from srvyr package. From ENVIPE’s documentation, we know that NOM_ENT represents the state, while SEXO corresponds to the respondent’s sex.\n\nenvipe_design |&gt;\n  # `interact` function is used to calculate the proportion \n  # over the interaction of state and sex\n  group_by(interact(NOM_ENT, SEXO)) |&gt;\n  summarize(\n    Proportion = survey_mean(victimization,\n      level = 0.90, # Confidence level\n      vartype = c(\"se\", \"ci\", \"cv\") # Variability indicators\n    )\n  ) |&gt;\n  ungroup() |&gt;\n  mutate(\n    `Prevalence rate` = Proportion * 100000, # Rate per 100,000 people\n    `Standard error` = Proportion_se * 100000,\n    `Low 90% CI` = Proportion_low * 100000,\n    `Upper 90% CI` = Proportion_upp * 100000,\n    `Coefficient of variation %` = Proportion_cv * 100,\n    State = str_to_sentence(NOM_ENT) # Capitalize only the first letter\n  ) |&gt;\n  rename(Sex = SEXO) |&gt;\n  select(State, Sex, `Prevalence rate`, `Standard error`, \n         `Low 90% CI`, `Upper 90% CI`, `Coefficient of variation %`) |&gt;\n  kbl() |&gt; # HTML table\n  kable_styling() # Apply bootstrap theme to the table\n\nThe output table looks like this:\n\n\n\n\n\nState\nSex\nPrevalence rate\nStandard error\nLow 90% CI\nUpper 90% CI\nCoefficient of variation %\n\n\n\n\nAguascalientes\nMan\n33710.81\n2172.7372\n30136.71\n37284.91\n6.445224\n\n\nAguascalientes\nWoman\n32041.57\n1831.7081\n29028.45\n35054.68\n5.716662\n\n\nBaja California\nMan\n23043.35\n1604.9769\n20403.20\n25683.50\n6.965032\n\n\nBaja California\nWoman\n24480.64\n1536.1771\n21953.66\n27007.61\n6.275070\n\n\nBaja California Sur\nMan\n19329.94\n1244.1353\n17283.36\n21376.51\n6.436314\n\n\nBaja California Sur\nWoman\n23817.58\n1466.2963\n21405.56\n26229.60\n6.156361\n\n\nCampeche\nMan\n21832.87\n1455.8508\n19438.03\n24227.71\n6.668161\n\n\nCampeche\nWoman\n23213.74\n1381.0933\n20941.88\n25485.61\n5.949465\n\n\nChiapas\nMan\n16602.99\n986.0052\n14981.03\n18224.94\n5.938722\n\n\nChiapas\nWoman\n12074.36\n978.7862\n10464.28\n13684.44\n8.106318\n\n\nChihuahua\nMan\n22303.22\n1234.5065\n20272.49\n24333.96\n5.535103\n\n\nChihuahua\nWoman\n22804.31\n1181.0327\n20861.54\n24747.08\n5.178990\n\n\nCiudad De Mexico\nMan\n34562.66\n1089.2714\n32770.84\n36354.49\n3.151584\n\n\nCiudad De Mexico\nWoman\n30746.76\n990.3528\n29117.66\n32375.87\n3.220999\n\n\nCoahuila De Zaragoza\nMan\n18179.70\n1249.1422\n16124.89\n20234.51\n6.871084\n\n\nCoahuila De Zaragoza\nWoman\n20447.19\n1238.7111\n18409.54\n22484.84\n6.058099\n\n\nColima\nMan\n21106.85\n1593.5970\n18485.43\n23728.28\n7.550140\n\n\nColima\nWoman\n21295.28\n1351.1455\n19072.68\n23517.88\n6.344813\n\n\nDurango\nMan\n15240.74\n1133.1868\n13376.67\n17104.80\n7.435250\n\n\nDurango\nWoman\n17401.18\n1166.0910\n15482.99\n19319.37\n6.701219\n\n\nGuanajuato\nMan\n20057.38\n1428.0981\n17708.20\n22406.57\n7.120063\n\n\nGuanajuato\nWoman\n18930.15\n1287.0811\n16812.93\n21047.37\n6.799107\n\n\nGuerrero\nMan\n16981.89\n1494.6554\n14523.22\n19440.56\n8.801466\n\n\nGuerrero\nWoman\n14572.44\n1238.6234\n12534.93\n16609.94\n8.499769\n\n\nHidalgo\nMan\n22397.82\n1338.0474\n20196.77\n24598.88\n5.974006\n\n\nHidalgo\nWoman\n20215.02\n1157.0294\n18311.73\n22118.30\n5.723613\n\n\nJalisco\nMan\n24390.13\n1548.7916\n21842.40\n26937.85\n6.350076\n\n\nJalisco\nWoman\n25141.90\n1438.5170\n22775.58\n27508.23\n5.721592\n\n\nMexico\nMan\n32906.59\n1632.3183\n30221.47\n35591.71\n4.960460\n\n\nMexico\nWoman\n33023.78\n1483.3471\n30583.71\n35463.85\n4.491755\n\n\nMichoacan De Ocampo\nMan\n14405.17\n1031.1125\n12709.01\n16101.32\n7.157934\n\n\nMichoacan De Ocampo\nWoman\n15485.20\n1036.3320\n13780.46\n17189.94\n6.692401\n\n\nMorelos\nMan\n26995.43\n1517.6054\n24499.00\n29491.85\n5.621713\n\n\nMorelos\nWoman\n24869.74\n1688.5969\n22092.04\n27647.44\n6.789765\n\n\nNayarit\nMan\n16075.56\n1516.6195\n13580.76\n18570.36\n9.434318\n\n\nNayarit\nWoman\n18639.61\n1597.1842\n16012.28\n21266.94\n8.568766\n\n\nNuevo Leon\nMan\n23602.12\n1261.9498\n21526.25\n25678.00\n5.346764\n\n\nNuevo Leon\nWoman\n21440.72\n1211.6372\n19447.60\n23433.83\n5.651104\n\n\nOaxaca\nMan\n12940.56\n1158.2366\n11035.29\n14845.83\n8.950434\n\n\nOaxaca\nWoman\n13548.61\n1017.7020\n11874.51\n15222.70\n7.511489\n\n\nPuebla\nMan\n26519.64\n1342.0473\n24312.00\n28727.27\n5.060579\n\n\nPuebla\nWoman\n24176.45\n1124.4656\n22326.73\n26026.17\n4.651078\n\n\nQueretaro\nMan\n30297.50\n1620.6534\n27631.57\n32963.44\n5.349132\n\n\nQueretaro\nWoman\n25746.31\n1260.3524\n23673.06\n27819.56\n4.895273\n\n\nQuintana Roo\nMan\n22592.04\n1384.4250\n20314.70\n24869.39\n6.127932\n\n\nQuintana Roo\nWoman\n21775.64\n1237.8095\n19739.48\n23811.81\n5.684376\n\n\nSan Luis Potosi\nMan\n24019.02\n1874.7438\n20935.11\n27102.93\n7.805247\n\n\nSan Luis Potosi\nWoman\n23227.97\n1491.3111\n20774.80\n25681.14\n6.420324\n\n\nSinaloa\nMan\n21181.44\n1122.0160\n19335.76\n23027.13\n5.297165\n\n\nSinaloa\nWoman\n20562.22\n1086.2790\n18775.32\n22349.12\n5.282887\n\n\nSonora\nMan\n26864.66\n1816.2677\n23876.94\n29852.37\n6.760808\n\n\nSonora\nWoman\n25742.16\n1902.0264\n22613.37\n28870.95\n7.388759\n\n\nTabasco\nMan\n25881.72\n1354.6212\n23653.40\n28110.04\n5.233891\n\n\nTabasco\nWoman\n25522.45\n1091.8488\n23726.38\n27318.51\n4.277994\n\n\nTamaulipas\nMan\n17788.15\n1075.8038\n16018.47\n19557.82\n6.047869\n\n\nTamaulipas\nWoman\n18368.67\n1017.1639\n16695.46\n20041.88\n5.537493\n\n\nTlaxcala\nMan\n23968.33\n1621.2198\n21301.47\n26635.20\n6.764007\n\n\nTlaxcala\nWoman\n22295.82\n1473.2391\n19872.38\n24719.26\n6.607692\n\n\nVeracruz De Ignacio De La Llave\nMan\n16365.05\n1055.8247\n14628.24\n18101.86\n6.451705\n\n\nVeracruz De Ignacio De La Llave\nWoman\n14712.45\n947.9121\n13153.15\n16271.74\n6.442927\n\n\nYucatan\nMan\n20677.82\n1239.0909\n18639.55\n22716.10\n5.992366\n\n\nYucatan\nWoman\n17805.62\n1141.8291\n15927.34\n19683.90\n6.412745\n\n\nZacatecas\nMan\n17328.49\n1346.8466\n15112.96\n19544.02\n7.772440\n\n\nZacatecas\nWoman\n15690.25\n1335.9463\n13492.65\n17887.85\n8.514502"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "",
    "text": "In these notes, I will show you how to use {ggplot} to create a waffle chart about the frequency of disease outbreaks in the world. The final output will look like this:"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#overview",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#overview",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "",
    "text": "In these notes, I will show you how to use {ggplot} to create a waffle chart about the frequency of disease outbreaks in the world. The final output will look like this:"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#about-the-data",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#about-the-data",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "About the data",
    "text": "About the data\nThe source of information is the global dataset of pandemic- and epidemic-prone disease outbreaks, whose data is freely available at the GitHub repository of the disease outbreaks project.\nThe unit of analysis in the database is an outbreak, defined as the occurrence of at least one case of a specific disease in a country -or territory- during a particular year. Therefore, a country -or territory- cannot have more than one outbreak of the same disease in the same year, although it may experience outbreaks of different diseases within the same year. A country can only have multiple outbreaks of the same disease if they occur in different years.\nThe dataset includes information on over 3,000 pandemic- and epidemic-prone disease outbreaks associated with more than 80 different infectious diseases, occurring globally from January 1996 to the present. The diseases are classified according to the International Classification of Diseases, 10th Revision (ICD-10), and the dataset contains information on the year, country, and disease for each outbreak.\nThe dataset of pandemic- and epidemic-prone disease outbreaks is also part of the Humanitarian Data Exchange coordinated by the United Nations Office for the Coordination of Humanitarian Affairs (OCHA)."
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#set-up",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#set-up",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "Set-up",
    "text": "Set-up\nTo create the waffle chart, we will use the following R packages:\n\nlibrary(tidyverse) # Tidy data analysis framework\nlibrary(readxl) # Read Excel files\nlibrary(httr) # Perform HTTP requests\nlibrary(showtext) # Add custom fonts to plots\nlibrary(ggtext) # Use rich text elements in ggplot\nlibrary(waffle) # Create waffle charts"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#loading-survey-microdata-from-inegi",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#loading-survey-microdata-from-inegi",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "Loading survey microdata from INEGI",
    "text": "Loading survey microdata from INEGI\n\n\n\n\n\n\nTip\n\n\n\nUsing the archive package, we can directly extract the required file from bd_envipe_2024_RData.zip.\n\n\n\n1. Specifying the ENVIPE survey design"
  },
  {
    "objectID": "blog/posts/estimating_envipe_prevalence/index.html",
    "href": "blog/posts/estimating_envipe_prevalence/index.html",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "",
    "text": "In this article, I will guide you through the process of analyzing Mexico’s 2024 National Survey of Victimization and Perception of Public Safety (Encuesta Nacional de Victimización y Percepción sobre Seguridad Pública, ENVIPE) using the {tidyverse} framework for survey analysis with the {srvyr} package. Specifically, we will calculate the crime prevalence rate per 100,000 inhabitants by state, according to the victim’s sex ( Tasa de prevalencia delictiva por entidad federativa por cada cien mil habitantes, según sexo de la víctima).\nOfficial tables with this indicator can be found here.\nBy the end of this article, you will be able to use the {tidyverse} to:\n\nLoad the survey microdata from INEGI’s website.\nSpecify the ENVIPE survey design.\nCalculate crime prevalence indicators."
  },
  {
    "objectID": "blog/posts/estimating_envipe_prevalence/index.html#overview",
    "href": "blog/posts/estimating_envipe_prevalence/index.html#overview",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "",
    "text": "In this article, I will guide you through the process of analyzing Mexico’s 2024 National Survey of Victimization and Perception of Public Safety (Encuesta Nacional de Victimización y Percepción sobre Seguridad Pública, ENVIPE) using the {tidyverse} framework for survey analysis with the {srvyr} package. Specifically, we will calculate the crime prevalence rate per 100,000 inhabitants by state, according to the victim’s sex ( Tasa de prevalencia delictiva por entidad federativa por cada cien mil habitantes, según sexo de la víctima).\nOfficial tables with this indicator can be found here.\nBy the end of this article, you will be able to use the {tidyverse} to:\n\nLoad the survey microdata from INEGI’s website.\nSpecify the ENVIPE survey design.\nCalculate crime prevalence indicators."
  },
  {
    "objectID": "blog/posts/estimating_envipe_prevalence/index.html#about-the-envipe",
    "href": "blog/posts/estimating_envipe_prevalence/index.html#about-the-envipe",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "About the ENVIPE",
    "text": "About the ENVIPE\nENVIPE is an official survey that provides nationally and state-representative information on household crime victimization and perceptions of public safety in Mexico. Conducted annually since 2011 by the National Institute of Statistics and Geography (INEGI), ENVIPE collects data on the following crimes:\n\n\n\nTotal vehicle theft (car, pickup truck, or truck).\nTheft of vehicle accessories, spare parts, or tools (car, pickup truck, or truck).\nWall graffiti, intentional vehicle damage, and other types of vandalism.\nBurglary or attempted burglary.\nKidnapping.\nEnforced disappearance.\nHomicide.\nRobbery or assault on the street or public transportation.\n\n\n\nTheft in a manner different from the above.\nBank fraud.\nConsumer fraud.\nExtortion.\nThreats.\nInjuries.\nKidnapping.\nHarassment or intimidation.\nGroping.\nExhibitionism.\nAttempted rape.\nSexual rape.\nOther crimes.\n\n\n\nAll survey-related information, including questionnaires, methodology, glossaries, summaries, and microdata, is fully available at INEGI’s website."
  },
  {
    "objectID": "blog/posts/estimating_envipe_prevalence/index.html#set-up",
    "href": "blog/posts/estimating_envipe_prevalence/index.html#set-up",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "Set-up",
    "text": "Set-up\nFirst, install and load the required packages:\n\nlibrary(tidyverse) # Tidy data analysis framework\nlibrary(srvyr) # Tidy syntax for survey data analysis\nlibrary(archive) # Extract files from a ZIP archive\nlibrary(kableExtra) # Create HTML table"
  },
  {
    "objectID": "blog/posts/estimating_envipe_prevalence/index.html#loading-survey-microdata-from-inegi",
    "href": "blog/posts/estimating_envipe_prevalence/index.html#loading-survey-microdata-from-inegi",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "Loading survey microdata from INEGI",
    "text": "Loading survey microdata from INEGI\nMicrodata is available here in various formats (CSV, DBF, DTA, SAV, and RData). In this post, we will use the RData files.\n\nload(archive_read(\n  archive = \"https://www.inegi.org.mx/contenidos/programas/envipe/2024/microdatos/bd_envipe_2024_RData.zip\",\n  file = \"BD_ENVIPE_2024.RData\"\n))\n\n\n\n\n\n\n\nTip\n\n\n\nUsing the {archive} package, we can directly extract the required file from bd_envipe_2024_RData.zip.\n\n\nThis loads the following objects into the global environment:\n\nTHogar: This object contains the interview result, the row of the selected respondent, the household factor, and other household characteristics.\nTMod_Vic: This object includes information on the crimes suffered by the selected respondent and their household during the reference year, specifically during 2023. Information comes from the victimization module of the survey.\nTPer_Vic1: This object includes information related to the perception of public security within the respondent’s geographic area, antisocial behaviors in their immediate surroundings, and changes in habits due to fear of becoming a crime victim in 2023. Additionally, it presents information regarding the performance of authorities and trust in them. In other words, this table covers Sections IV and V of the main questionnaire.\nTPer_Vic2: This object consolidates information related to household and personal victimization, particularly focusing on high-impact crimes experienced by the household (such as kidnapping, enforced disappearance, or homicide) or by the selected respondent. This table includes Sections VI and VII of the main questionnaire.\nTSDem: This object contains the socio-demographic characteristics of household members, corresponding to Section III of the main questionnaire.\nTSVivienda: This object contains the characteristics of the households captured through the questionnaire cover page, as well as the count of household residents and the number of households. In other words, it includes Sections I and II of the main questionnaire."
  },
  {
    "objectID": "blog/posts/estimating_envipe_prevalence/index.html#calculating-crime-prevalence-rate-per-100000-thousand-inhabitants-by-state-according-to-the-victims-sex",
    "href": "blog/posts/estimating_envipe_prevalence/index.html#calculating-crime-prevalence-rate-per-100000-thousand-inhabitants-by-state-according-to-the-victims-sex",
    "title": "Using a tidy approach in R to analyze Mexico’s 2024 ENVIPE",
    "section": "Calculating crime prevalence rate per 100,000 thousand inhabitants by state, according to the victim’s sex",
    "text": "Calculating crime prevalence rate per 100,000 thousand inhabitants by state, according to the victim’s sex\nTo estimate the crime prevalence rate, we use information from TPer_Vic2 (screening questions on victimization from the main questionnaire) and TMod_Vic (specific victimization module applied to the respondents who reported being a victim of at least one of the crimes included in the survey during the reference period). TPer_Vic2 will serve to characterize the total population and TMod_Vic to describe the victims and the associated crimes.\n\n1. Specifying the ENVIPE survey design\nENVIPE follows a probabilistic, three-stage, stratified, and clustered sampling design. The sampling unit is the household, while the unit of analysis is the population aged 18 and older in selected households. More details on the sampling design can be found here(in Spanish).\nFrom the documentation on data structure(in Spanish), the key variables for specifying the survey design are:\n\nID_PER: Person identifier\nEST_DIS: Stratum\nUPM_DIS: Primary sampling unit\nFAC_ELE: Weighting factor for public security perception and victimization estimates.\n\nWe specify the survey design as follows:\n\n# Identify victims from TMod_Vic, excluding\n# \"Wall graffiti, intentional vehicle damage, and other vandalism\" (BPCOD != \"03\")\nid_victims &lt;- TMod_Vic |&gt;\n  filter(BPCOD != \"03\") |&gt;\n  pull(ID_PER)\n\n# Create victimization variable in TPer_Vic2\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(victimization = ifelse(ID_PER %in% id_victims, 1, 0))\n\n# Convert FAC_ELE (weights) to numeric\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(FAC_ELE = as.numeric(FAC_ELE))\n\n# Label SEXO variable\nTPer_Vic2 &lt;- TPer_Vic2 |&gt;\n  mutate(SEXO = recode(SEXO, \"1\" = \"Man\", \"2\" = \"Woman\"))\n\n# Create survey object\nenvipe_design &lt;- TPer_Vic2 |&gt;\n  as_survey_design(\n    weights = FAC_ELE, # Weights (inverse probability)\n    strata = EST_DIS, # Stratum\n    ids = UPM_DIS, # Primary sampling unit\n    nest = TRUE # Nesting within strata\n  )\n\n\n\n2. Calculating point estimates and variablity indicators\nTo compute proportions from survey data, we use survey_mean() from {srvyr} package. From ENVIPE’s documentation, we know that NOM_ENT represents the state, while SEXO corresponds to the respondent’s sex.\n\nenvipe_design |&gt;\n  # `interact` function is used to calculate the proportion\n  # over the interaction of state and sex\n  group_by(interact(NOM_ENT, SEXO)) |&gt;\n  summarize(\n    Proportion = survey_mean(victimization,\n      level = 0.90, # Confidence level\n      vartype = c(\"se\", \"ci\", \"cv\") # Variability indicators\n    )\n  ) |&gt;\n  ungroup() |&gt;\n  mutate(\n    `Prevalence rate` = Proportion * 100000, # Rate per 100,000 people\n    `Standard error` = Proportion_se * 100000,\n    `Low 90% CI` = Proportion_low * 100000,\n    `Upper 90% CI` = Proportion_upp * 100000,\n    `Coefficient of variation %` = Proportion_cv * 100,\n    State = str_to_sentence(NOM_ENT) # Capitalize only the first letter\n  ) |&gt;\n  rename(Sex = SEXO) |&gt;\n  select(\n    State, Sex, `Prevalence rate`, `Standard error`,\n    `Low 90% CI`, `Upper 90% CI`, `Coefficient of variation %`\n  ) |&gt;\n  kbl() |&gt; # HTML table\n  kable_styling() # Apply bootstrap theme to the table\n\nThe output table looks like this:\n\n\n\n\n\nState\nSex\nPrevalence rate\nStandard error\nLow 90% CI\nUpper 90% CI\nCoefficient of variation %\n\n\n\n\nAguascalientes\nMan\n33710.81\n2172.7372\n30136.71\n37284.91\n6.445224\n\n\nAguascalientes\nWoman\n32041.57\n1831.7081\n29028.45\n35054.68\n5.716662\n\n\nBaja California\nMan\n23043.35\n1604.9769\n20403.20\n25683.50\n6.965032\n\n\nBaja California\nWoman\n24480.64\n1536.1771\n21953.66\n27007.61\n6.275070\n\n\nBaja California Sur\nMan\n19329.94\n1244.1353\n17283.36\n21376.51\n6.436314\n\n\nBaja California Sur\nWoman\n23817.58\n1466.2963\n21405.56\n26229.60\n6.156361\n\n\nCampeche\nMan\n21832.87\n1455.8508\n19438.03\n24227.71\n6.668161\n\n\nCampeche\nWoman\n23213.74\n1381.0933\n20941.88\n25485.61\n5.949465\n\n\nChiapas\nMan\n16602.99\n986.0052\n14981.03\n18224.94\n5.938722\n\n\nChiapas\nWoman\n12074.36\n978.7862\n10464.28\n13684.44\n8.106318\n\n\nChihuahua\nMan\n22303.22\n1234.5065\n20272.49\n24333.96\n5.535103\n\n\nChihuahua\nWoman\n22804.31\n1181.0327\n20861.54\n24747.08\n5.178990\n\n\nCiudad De Mexico\nMan\n34562.66\n1089.2714\n32770.84\n36354.49\n3.151584\n\n\nCiudad De Mexico\nWoman\n30746.76\n990.3528\n29117.66\n32375.87\n3.220999\n\n\nCoahuila De Zaragoza\nMan\n18179.70\n1249.1422\n16124.89\n20234.51\n6.871084\n\n\nCoahuila De Zaragoza\nWoman\n20447.19\n1238.7111\n18409.54\n22484.84\n6.058099\n\n\nColima\nMan\n21106.85\n1593.5970\n18485.43\n23728.28\n7.550140\n\n\nColima\nWoman\n21295.28\n1351.1455\n19072.68\n23517.88\n6.344813\n\n\nDurango\nMan\n15240.74\n1133.1868\n13376.67\n17104.80\n7.435250\n\n\nDurango\nWoman\n17401.18\n1166.0910\n15482.99\n19319.37\n6.701219\n\n\nGuanajuato\nMan\n20057.38\n1428.0981\n17708.20\n22406.57\n7.120063\n\n\nGuanajuato\nWoman\n18930.15\n1287.0811\n16812.93\n21047.37\n6.799107\n\n\nGuerrero\nMan\n16981.89\n1494.6554\n14523.22\n19440.56\n8.801466\n\n\nGuerrero\nWoman\n14572.44\n1238.6234\n12534.93\n16609.94\n8.499769\n\n\nHidalgo\nMan\n22397.82\n1338.0474\n20196.77\n24598.88\n5.974006\n\n\nHidalgo\nWoman\n20215.02\n1157.0294\n18311.73\n22118.30\n5.723613\n\n\nJalisco\nMan\n24390.13\n1548.7916\n21842.40\n26937.85\n6.350076\n\n\nJalisco\nWoman\n25141.90\n1438.5170\n22775.58\n27508.23\n5.721592\n\n\nMexico\nMan\n32906.59\n1632.3183\n30221.47\n35591.71\n4.960460\n\n\nMexico\nWoman\n33023.78\n1483.3471\n30583.71\n35463.85\n4.491755\n\n\nMichoacan De Ocampo\nMan\n14405.17\n1031.1125\n12709.01\n16101.32\n7.157934\n\n\nMichoacan De Ocampo\nWoman\n15485.20\n1036.3320\n13780.46\n17189.94\n6.692401\n\n\nMorelos\nMan\n26995.43\n1517.6054\n24499.00\n29491.85\n5.621713\n\n\nMorelos\nWoman\n24869.74\n1688.5969\n22092.04\n27647.44\n6.789765\n\n\nNayarit\nMan\n16075.56\n1516.6195\n13580.76\n18570.36\n9.434318\n\n\nNayarit\nWoman\n18639.61\n1597.1842\n16012.28\n21266.94\n8.568766\n\n\nNuevo Leon\nMan\n23602.12\n1261.9498\n21526.25\n25678.00\n5.346764\n\n\nNuevo Leon\nWoman\n21440.72\n1211.6372\n19447.60\n23433.83\n5.651104\n\n\nOaxaca\nMan\n12940.56\n1158.2366\n11035.29\n14845.83\n8.950434\n\n\nOaxaca\nWoman\n13548.61\n1017.7020\n11874.51\n15222.70\n7.511489\n\n\nPuebla\nMan\n26519.64\n1342.0473\n24312.00\n28727.27\n5.060579\n\n\nPuebla\nWoman\n24176.45\n1124.4656\n22326.73\n26026.17\n4.651078\n\n\nQueretaro\nMan\n30297.50\n1620.6534\n27631.57\n32963.44\n5.349132\n\n\nQueretaro\nWoman\n25746.31\n1260.3524\n23673.06\n27819.56\n4.895273\n\n\nQuintana Roo\nMan\n22592.04\n1384.4250\n20314.70\n24869.39\n6.127932\n\n\nQuintana Roo\nWoman\n21775.64\n1237.8095\n19739.48\n23811.81\n5.684376\n\n\nSan Luis Potosi\nMan\n24019.02\n1874.7438\n20935.11\n27102.93\n7.805247\n\n\nSan Luis Potosi\nWoman\n23227.97\n1491.3111\n20774.80\n25681.14\n6.420324\n\n\nSinaloa\nMan\n21181.44\n1122.0160\n19335.76\n23027.13\n5.297165\n\n\nSinaloa\nWoman\n20562.22\n1086.2790\n18775.32\n22349.12\n5.282887\n\n\nSonora\nMan\n26864.66\n1816.2677\n23876.94\n29852.37\n6.760808\n\n\nSonora\nWoman\n25742.16\n1902.0264\n22613.37\n28870.95\n7.388759\n\n\nTabasco\nMan\n25881.72\n1354.6212\n23653.40\n28110.04\n5.233891\n\n\nTabasco\nWoman\n25522.45\n1091.8488\n23726.38\n27318.51\n4.277994\n\n\nTamaulipas\nMan\n17788.15\n1075.8038\n16018.47\n19557.82\n6.047869\n\n\nTamaulipas\nWoman\n18368.67\n1017.1639\n16695.46\n20041.88\n5.537493\n\n\nTlaxcala\nMan\n23968.33\n1621.2198\n21301.47\n26635.20\n6.764007\n\n\nTlaxcala\nWoman\n22295.82\n1473.2391\n19872.38\n24719.26\n6.607692\n\n\nVeracruz De Ignacio De La Llave\nMan\n16365.05\n1055.8247\n14628.24\n18101.86\n6.451705\n\n\nVeracruz De Ignacio De La Llave\nWoman\n14712.45\n947.9121\n13153.15\n16271.74\n6.442927\n\n\nYucatan\nMan\n20677.82\n1239.0909\n18639.55\n22716.10\n5.992366\n\n\nYucatan\nWoman\n17805.62\n1141.8291\n15927.34\n19683.90\n6.412745\n\n\nZacatecas\nMan\n17328.49\n1346.8466\n15112.96\n19544.02\n7.772440\n\n\nZacatecas\nWoman\n15690.25\n1335.9463\n13492.65\n17887.85\n8.514502"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#loading-data-from-github",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#loading-data-from-github",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "Loading data from GitHub",
    "text": "Loading data from GitHub\nThe dataset is stored in an Excel. We will download it from the GitHub repository and load it into R:\n\n# Define the GitHub raw content URL\nlink_data &lt;- \"https://github.com/jatorresmunguia/disease_outbreak_news/raw/refs/heads/main/Humanitarian%20Data%20Exchange/data_2_share/disease_outbreaks_HDX.xlsx\"\n\n# Create a temporary file to store the data\ntemp &lt;- tempfile(fileext = \".xlsx\")\n\n# Download the data from GitHub using authentication\nget_req &lt;- GET(\n  link_data,\n  authenticate(Sys.getenv(\"GITHUB_PAT\"), \"\"),\n  write_disk(path = temp)\n)\n\n# Read the Excel file into R\noutbreaks &lt;- read_excel(temp)\n\n\nData wrangling\nWe will group the data by year and disease, and then filter the top 10 diseases from 1996 to 2024. We will also group the data by year and disease, and then filter the top 10 diseases from 2015 to 2024. Finally, we will create a factor variable for the top 10 diseases and the “Other” category:\n\n# Top 10 diseases 1996-2024\ntop_10_icd104n &lt;- outbreaks |&gt;\n  filter(Year &lt; 2025) |&gt;\n  group_by(icd104n) |&gt;\n  summarise(freq = n(), .groups = \"drop\") |&gt;\n  arrange(-freq) |&gt;\n  slice_head(n = 10)\n\n# Only top-10 categories and Others\noutbreaks_year_disease_grouped &lt;- outbreaks |&gt;\n  filter(Year &lt; 2025 & Year &gt; 2014) |&gt;\n  mutate(icd104n = ifelse(icd104n %in% top_10_icd104n$icd104n, icd104n, \"Other\")) |&gt; # Group the diseases\n  group_by(Year, icd104n) |&gt;\n  summarise(freq = n(), .groups = \"drop\") |&gt; # Count the number of outbreaks\n  arrange(-freq)\n\n# Create a factor variable for the top 10 diseases and the \"Other\" category\noutbreaks_year_disease_grouped &lt;- outbreaks_year_disease_grouped |&gt;\n  mutate(icd104n = factor(icd104n,\n    levels = c(\n      \"Acute poliomyelitis, unspecified\", \"Classical cholera\", \"COVID-19, virus identified\",\n      \"Dengue, unspecified\", \"Influenza due to identified zoonotic or pandemic influenza virus\", \"Measles\",\n      \"Meningococcal meningitis\", \"Middle East respiratory syndrome coronavirus [MERS-CoV]\", \"Monkeypox\",\n      \"Yellow fever, unspecified\", \"Other\"\n    ),\n    labels = c(\n      \"Acute poliomyelitis\", \"Cholera\", \"COVID-19\", \"Dengue\", \"Influenza\",\n      \"Measles\", \"Meningococcal meningitis\", \"MERS-CoV\", \"Monkeypox\",\n      \"Yellow fever\", \"Other\"\n    )\n  ))"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#set-theme-settings-and-define-fonts-colors-and-text-to-be-used-in-the-waffle-chart",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#set-theme-settings-and-define-fonts-colors-and-text-to-be-used-in-the-waffle-chart",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "Set theme settings and define fonts, colors, and text to be used in the waffle chart",
    "text": "Set theme settings and define fonts, colors, and text to be used in the waffle chart\n\n# Custom theme for the waffle chart\ntheme_waffle_chart &lt;- function() {\n  theme_minimal(\n    base_family = \"Roboto Condensed\" # Base theme with custom font\n  ) +\n    # Custom theme settings\n    theme(\n      # Axis settings\n      axis.title = element_blank(), # Remove axis title\n      axis.line = element_blank(), # Remove axis line\n\n      # Title settings\n      plot.title.position = \"plot\", # Position of the title\n      plot.title = element_textbox(\n        color = \"black\",\n        face = \"bold\",\n        size = 24,\n        margin = margin(5, 0, 5, 0), # Top, right, bottom, left\n        width = unit(1, \"npc\") # Width of the title, npc == 1 corresponds to the full width of the plot\n      ),\n\n      # Subtitle settings\n      plot.subtitle = element_textbox(\n        color = \"grey50\",\n        face = \"bold\",\n        size = 14,\n        margin = margin(0, 0, 10, 0),\n        width = unit(1, \"npc\")\n      ),\n\n      # Legend settings\n      legend.position = \"top\",\n      legend.title = element_blank(),\n      legend.key.height = unit(0.5, \"cm\"), # Height of the legend key\n      legend.key.width = unit(0.5, \"cm\"), # Width of the legend key\n      legend.spacing.x = unit(0.2, \"cm\"),\n      legend.key.spacing = unit(0.5, \"cm\"), # Spacing between legend keys\n      legend.text = element_text(\n        margin = margin(5, 0, 5, 0),\n        face = \"bold\",\n        color = \"grey10\",\n        size = 10\n      ),\n      legend.direction = \"horizontal\",\n      legend.byrow = FALSE,\n\n      # Caption settings\n      plot.caption = element_textbox(\n        color = \"grey70\",\n        face = \"italic\",\n        size = 12,\n        margin = margin(10, 0, 5, 0),\n        width = unit(1, \"npc\")\n      ),\n      plot.background = element_rect(\n        color = \"white\",\n        fill = \"white\"\n      ),\n      plot.margin = margin(20, 40, 20, 40)\n    )\n}\n\n# Title, subtitle, and caption for the waffle chart\ntitle_chart &lt;- \"Pandemic- and epidemic-prone disease outbreaks in the world\"\nsubtitle_chart &lt;- \"In 2024, fewer countries reported public health events linked to COVID-19, while outbreaks of viral diseases transmitted by vectors increased\"\ncaption_chart &lt;- \"Data: A global dataset of pandemic- and epidemic-prone disease outbreaks (DOI: 10.1038/s41597-022-01797-2) | Graphic: Juan Torres Munguía\"\n\n# Define the colors to be used in the waffle chart\ncolors &lt;- c(\n  \"#B66DFF\", \"#7e0021\", \"#ff420e\", \"#579d1c\", \"#83caff\",\n  \"#0084d1\", \"#aecf00\", \"#4b1f6f\", \"#FF86FF\", \"#ffd320\", \"grey80\"\n)"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#create-the-waffle-chart",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#create-the-waffle-chart",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "Create the waffle chart",
    "text": "Create the waffle chart\n\nggplot(\n  outbreaks_year_disease_grouped,\n  aes(fill = icd104n, values = freq)\n) +\n  geom_waffle(\n    size = 0.25, # Size of the waffle squares\n    n_rows = 10, # Number of rows in the waffle chart\n    flip = TRUE, # Flip the waffle chart\n    color = \"white\", # Color of the border of the waffle squares\n    make_proportional = FALSE\n  ) + # Do not make the waffle chart proportional\n  facet_wrap(~Year, # Facet the waffle chart by year\n    nrow = 1,\n    strip.position = \"bottom\"\n  ) + # Position of the facet strip\n  scale_fill_manual(values = colors) +\n  scale_x_discrete() +\n  scale_y_continuous(\n    labels = function(x) x * 10,\n    expand = c(0, 0)\n  ) + # Expand the y-axis\n  coord_equal() +\n  labs(\n    title = title_chart,\n    subtitle = subtitle_chart,\n    caption = caption_chart,\n    x = \"\",\n    y = \"Total number of outbreaks\",\n    fill = \"\"\n  ) +\n  guides(fill = guide_legend(nrow = 2)) + # Number of rows in the legend\n  theme_waffle_chart()"
  },
  {
    "objectID": "blog/posts/waffle_chart_disease_outbreaks/index.html#save-the-waffle-chart-as-an-image",
    "href": "blog/posts/waffle_chart_disease_outbreaks/index.html#save-the-waffle-chart-as-an-image",
    "title": "A waffle chart of disease outbreaks in the world",
    "section": "Save the waffle chart as an image",
    "text": "Save the waffle chart as an image\n\nshowtext_opts(dpi = 320) # Set the resolution of the image 320 dpi is for high-quality images (\"retina\")\nggsave(\n  \"waffle-pandemics.png\",\n  dpi = 320,\n  width = 12,\n  height = 9,\n  units = \"in\"\n)\nshowtext_auto(FALSE)"
  },
  {
    "objectID": "blog/posts/spi_somalia/index.html",
    "href": "blog/posts/spi_somalia/index.html",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "",
    "text": "The Standardized Precipitation Index (SPI) is a widely used drought index that provides a measure of precipitation anomalies relative to the long-term average. The SPI is calculated for different time scales (e.g., 1, 3, 6, 12 months) and can be used to monitor drought conditions, assess drought severity, and support drought early warning systems, as it provides a standardized measure of precipitation anomalies that can be compared across districts and time periods.\nIn this tutorial, we will walk through the process of calculating the SPI for Somalia at the subnational level using the {SCI} package in R."
  },
  {
    "objectID": "blog/posts/spi_somalia/index.html#overview",
    "href": "blog/posts/spi_somalia/index.html#overview",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "",
    "text": "The Standardized Precipitation Index (SPI) is a widely used drought index that provides a measure of precipitation anomalies relative to the long-term average. The SPI is calculated for different time scales (e.g., 1, 3, 6, 12 months) and can be used to monitor drought conditions, assess drought severity, and support drought early warning systems, as it provides a standardized measure of precipitation anomalies that can be compared across districts and time periods.\nIn this tutorial, we will walk through the process of calculating the SPI for Somalia at the subnational level using the {SCI} package in R."
  },
  {
    "objectID": "blog/posts/spi_somalia/index.html#about-the-data",
    "href": "blog/posts/spi_somalia/index.html#about-the-data",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "About the data",
    "text": "About the data\nThe rainfall dataset used in this tutorial comes from the Humanitarian Data Exchange (HDX) initiative of the United Nations Office for the Coordination of Humanitarian Affairs (OCHA) and provides monthly precipitation data for Somalia’s subnational districts. It is derived from CHIRPS v2 (Climate Hazards Group InfraRed Precipitation with in situ Station data), using satellite imagery combined with ground-based observations.\nFor each 10-day period (dekad), the dataset includes the following indicators:\n\nrfh: Total rainfall (mm) over 10 days\nr1h: 1-month rolling rainfall sum (mm)\nr3h: 3-month rolling rainfall sum (mm)\nrfh_avg: Long-term average rainfall for the dekad (mm)\nr1h_avg: Long-term average for 1-month rolling rainfall (mm)\nr3h_avg: Long-term average for 3-month rolling rainfall (mm)\nrfq: Rainfall anomaly (%)\nr1q: Rainfall anomaly (%)\nr3q: 3-month rainfall anomaly (%)\n\nThe data is aggregated at the subnational level and follows administrative boundaries defined by the World Food Programme (WFP), with each unit assigned a unique code (Pcode)."
  },
  {
    "objectID": "blog/posts/spi_somalia/index.html#set-up",
    "href": "blog/posts/spi_somalia/index.html#set-up",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "Set-up",
    "text": "Set-up\nBefore we begin, we need to install and load the necessary R packages. We will be using the {tidyverse} package for data wrangling, as well as the {SCI} package for calculating the SPI.\n\nlibrary(tidyverse) # For data manipulation and visualization\nlibrary(SCI) # For Standardized Precipitation Index calculations (climate analysis)\nlibrary(conflicted) # For resolving conflicts between function names in different packages\nlibrary(kableExtra) # Create HTML table\nlibrary(ggplot2) # Create plots\nlibrary(ggtext) # Use rich text elements in ggplot\nlibrary(showtext) # Add custom fonts to plots\n\nconflicts_prefer(dplyr::select) # Prefer 'select' function from dplyr package\nconflicts_prefer(dplyr::lag) # Prefer 'lag' function from dplyr package\nconflicts_prefer(dplyr::filter) # Prefer 'filter' function from dplyr package\n\n\n\n\n\n\n\nWarning\n\n\n\nImportant to use {conflicted} package to specify preferred functions to avoid naming conflicts between {tidyverse} and {SCI} packages."
  },
  {
    "objectID": "blog/posts/spi_somalia/index.html#loading-data-hdx",
    "href": "blog/posts/spi_somalia/index.html#loading-data-hdx",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "Loading data HDX",
    "text": "Loading data HDX\nData can be found here in file som-rainfall-adm2-full.csv. For Somalia, data is available from January 1981.\n\n# Read the rainfall data for Somalia`\n# You can also download the data from the HDX platform and read it locally\nrainfall_data &lt;- read.csv(\"https://data.humdata.org/dataset/ed6e1b4b-8094-47e6-bdf7-f6d56fa7abb9/resource/331ab214-0860-44ea-a53b-0a3fac601e82/download/som-rainfall-adm2-full.csv\")\n\n\nData wrangling\nWe preprocess the data to extract relevant information to calculate the SPI. We extract the year and month from the date column, calculate the rainfall anomaly, and group the data by year, month, and district_code.\n\nrainfall_data &lt;- rainfall_data |&gt;\n  slice(-1) |&gt; # Remove the first row (metadata)\n  mutate(\n    year = year(date), # Extract year from the 'date' column\n    month = month(date), # Extract month from the 'date' column\n    district_code = ADM2_PCODE # Rename the 'ADM2_PCODE' column to 'district_code'\n  ) |&gt;\n  filter(year &lt; 2025) |&gt; # Filter data up to 2024\n  rename(\n    rainfall_monthly_total = rfh, # Rename the column 'rfh' to 'rainfall_monthly_total'\n    rainfall_monthly_lt_average = rfh_avg # Rename the column 'rfh_avg' to 'rainfall_monthly_lt_average'\n  ) |&gt;\n  mutate(\n    rainfall_monthly_total = as.numeric(rainfall_monthly_total), # Convert rainfall total to numeric\n    rainfall_monthly_lt_average = as.numeric(rainfall_monthly_lt_average) # Convert long-term average to numeric\n  ) |&gt;\n  select(year, month, district_code, rainfall_monthly_total, rainfall_monthly_lt_average) # Select relevant columns\n\n# Group by year, month, and district_code, and calculate mean rainfall values by district\nrainfall_data &lt;- rainfall_data |&gt;\n  group_by(year, month, district_code) |&gt;\n  summarise(\n    rainfall_monthly_total = mean(rainfall_monthly_total, na.rm = TRUE), # Calculate the mean of rainfall total\n    rainfall_monthly_lt_average = mean(rainfall_monthly_lt_average, na.rm = TRUE) # Calculate the mean of long-term average\n  ) |&gt;\n  ungroup() |&gt;\n  # Optionally, you can calculate rainfall anomaly as a percentage of the long-term average\n  # rainfall_anomaly = 1, indicates no anomaly\n  # &lt; 1 indicates below average\n  # &gt; 1 indicates above average\n  mutate(\n    rainfall_anomaly = rainfall_monthly_total / rainfall_monthly_lt_average\n  )"
  },
  {
    "objectID": "blog/posts/spi_somalia/index.html#we-then-calculate-the-spi-for-different-time-scales-1-3-6-12-months.",
    "href": "blog/posts/spi_somalia/index.html#we-then-calculate-the-spi-for-different-time-scales-1-3-6-12-months.",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "We then calculate the SPI for different time scales (1, 3, 6, 12 months).",
    "text": "We then calculate the SPI for different time scales (1, 3, 6, 12 months).\n\nrainfall_data &lt;- rainfall_data |&gt;\n  group_by(district_code) |&gt; # Group by district_code\n  mutate(\n    spi1 = transformSCI(\n      rainfall_monthly_total,\n      first.mon = 1, # Start month for SPI calculation\n      obj = fitSCI(rainfall_monthly_total,\n        first.mon = 1, # Start month for SPI calculation\n        time.scale = 1, # Time scale for SPI calculation\n        distr = \"gamma\", # Distribution for fitting\n        p0 = TRUE # Use initial parameter estimates\n      )\n    ),\n    spi3 = transformSCI(\n      rainfall_monthly_total,\n      first.mon = 1,\n      obj = fitSCI(rainfall_monthly_total,\n        first.mon = 1,\n        time.scale = 3,\n        distr = \"gamma\",\n        p0 = TRUE\n      )\n    ),\n    spi6 = transformSCI(\n      rainfall_monthly_total,\n      first.mon = 1,\n      obj = fitSCI(rainfall_monthly_total,\n        first.mon = 1,\n        time.scale = 6,\n        distr = \"gamma\",\n        p0 = TRUE\n      )\n    ),\n    spi12 = transformSCI(\n      rainfall_monthly_total,\n      first.mon = 1,\n      obj = fitSCI(rainfall_monthly_total,\n        first.mon = 1,\n        time.scale = 12,\n        distr = \"gamma\",\n        p0 = TRUE\n      )\n    )\n  ) |&gt;\n  ungroup() |&gt;\n  arrange(district_code)\n\nThe output table looks like this:\n\n\n\n\n\nyear\nmonth\ndistrict_code\nrainfall_monthly_total\nrainfall_monthly_lt_average\nrainfall_anomaly\nspi1\nspi3\nspi6\nspi12\n\n\n\n\n1981\n1\nSO1101\n0.9417333\n1.744867\n0.5397165\n-1.1043897\nNA\nNA\nNA\n\n\n1981\n2\nSO1101\n2.0194333\n2.027633\n0.9959559\n0.1537179\nNA\nNA\nNA\n\n\n1981\n3\nSO1101\n32.8349667\n9.696967\n3.3861070\n2.0618329\n2.0528624\nNA\nNA\n\n\n1981\n4\nSO1101\n18.3139000\n24.722233\n0.7407866\n-0.3498790\n0.9691425\nNA\nNA\n\n\n1981\n5\nSO1101\n6.7928667\n17.754700\n0.3825954\n-1.1682135\n0.3442811\nNA\nNA\n\n\n1981\n6\nSO1101\n2.7443667\n4.763233\n0.5761563\n-1.1812491\n-1.5029868\n0.1547485\nNA\n\n\n1981\n7\nSO1101\n17.3592333\n14.047767\n1.2357290\n0.7686622\n-0.9047071\n0.3837349\nNA\n\n\n1981\n8\nSO1101\n34.8381667\n26.758133\n1.3019655\n0.8281642\n0.7648521\n0.7381726\nNA\n\n\n1981\n9\nSO1101\n29.1683000\n19.003000\n1.5349313\n1.2521209\n1.2301335\n0.0193033\nNA\n\n\n1981\n10\nSO1101\n4.1974333\n8.226200\n0.5102518\n-0.3816687\n0.7653220\n0.1559546\nNA"
  },
  {
    "objectID": "blog/posts/spi_somalia/index.html#interpretation",
    "href": "blog/posts/spi_somalia/index.html#interpretation",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "Interpretation",
    "text": "Interpretation\nDrought events are indicated by negative SPI values, with more negative values indicating more severe drought conditions. Conversely, positive SPI values indicate wetter-than-average conditions. For demonstrating purposes, let’s visualize the SPI values for Laasqoray district in Sanaag region. One efficient way to visualize SPI values is by using a box plot with SPI categories.\n\n# Custom theme for the chart\ntheme_boxplot_chart &lt;- function() {\n  theme_minimal(\n    base_family = \"Roboto Condensed\" # Base theme with custom font\n  ) +\n    # Custom theme settings\n    theme(\n      # Axis settings\n      axis.title = element_text(\n        color = \"grey10\",\n        face = \"bold\",\n        size = 14\n      ),\n      axis.text = element_text(\n        color = \"grey10\",\n        face = \"bold\",\n        size = 12\n      ),\n\n      # Title settings\n      plot.title.position = \"plot\", # Position of the title\n      plot.title = element_textbox(\n        color = \"black\",\n        face = \"bold\",\n        size = 24,\n        margin = margin(5, 0, 5, 0), # Top, right, bottom, left\n        width = unit(1, \"npc\") # Width of the title, npc == 1 corresponds to the full width of the plot\n      ),\n\n      # Legend settings\n      legend.position = \"top\",\n      legend.title = element_blank(),\n      legend.key.height = unit(0.5, \"cm\"), # Height of the legend key\n      legend.key.width = unit(0.5, \"cm\"), # Width of the legend key\n      legend.spacing.x = unit(0.2, \"cm\"),\n      legend.key.spacing = unit(0.5, \"cm\"), # Spacing between legend keys\n      legend.text = element_text(\n        margin = margin(5, 0, 5, 0),\n        face = \"bold\",\n        color = \"grey10\",\n        size = 10\n      ),\n      legend.direction = \"horizontal\",\n      legend.byrow = FALSE,\n\n      # Caption settings\n      plot.caption = element_textbox(\n        color = \"grey70\",\n        face = \"italic\",\n        size = 12,\n        margin = margin(10, 0, 5, 0),\n        width = unit(1, \"npc\")\n      ),\n      plot.background = element_rect(\n        color = \"white\",\n        fill = \"white\"\n      ),\n      plot.margin = margin(20, 40, 20, 40)\n    )\n}\n\n# Title, subtitle, and caption for the boxplot chart\ntitle_chart &lt;- \"1-month Standardized Precipitation Index (SPI-1) in Laasqoray, Somalia for the period 1981-2024\"\ncaption_chart &lt;- \"Data: Somalia: Own estimations using rainfall Indicators at Subnational Level (HDX) | Graphic: Juan Torres Munguía\"\n\n#\nspi_colors &lt;- data.frame(\n  ymin = c(-5, -2, -1.5, -1, 0, 1, 1.5, 2),\n  ymax = c(-2, -1.5, -1, 0, 1, 1.5, 2, 5),\n  label = factor(\n    c(\n      \"Extremely dry\", \"Severely dry\", \"Moderately dry\", \"Near normal\",\n      \"Near normal\", \"Moderately wet\", \"Severely wet\", \"Extremely wet\"\n    ),\n    levels = c(\n      \"Extremely dry\", \"Severely dry\", \"Moderately dry\", \"Near normal\",\n      \"Moderately wet\", \"Severely wet\", \"Extremely wet\"\n    )\n  ),\n  fill = c(\n    \"#F76D5E\", \"#FFAD72\", \"#FFE099\", \"#99FF99\",\n    \"#99FF99\", \"#99EAFF\", \"#75D3FF\", \"#3D87FF\"\n  )\n)\n\nrainfall_data |&gt;\n  filter(district_code == \"SO1503\") |&gt;\n  mutate(month = factor(month, levels = 1:12, labels = month.name)) |&gt; # Convert month to factor\n  ggplot(aes(x = month, y = spi1)) +\n\n  # Add box plot with SPI categories\n  geom_rect(\n    data = spi_colors, aes(ymin = ymin, ymax = ymax, xmin = -Inf, xmax = Inf, fill = label),\n    alpha = 0.2, inherit.aes = FALSE\n  ) +\n  geom_boxplot(size = 1, outlier.size = 2, outlier.shape = 16) +\n  scale_fill_manual(values = setNames(spi_colors$fill, spi_colors$label)) +\n  labs(\n    title = title_chart,\n    caption = caption_chart,\n    x = \"\",\n    y = \"SPI-1\",\n    fill = \"\"\n  ) +\n  guides(fill = guide_legend(nrow = 1)) + # Number of rows in the legend\n  theme_boxplot_chart()\nshowtext_opts(dpi = 320) # Set the resolution of the image 320 dpi is for high-quality images (\"retina\")\nggsave(\n  \"spi-somalia.png\",\n  dpi = 320,\n  width = 12,\n  height = 9,\n  units = \"in\"\n)\nshowtext_auto(FALSE) # Turn off the showtext functionality"
  },
  {
    "objectID": "blog/posts/spi_somalia_visualization/index.html",
    "href": "blog/posts/spi_somalia_visualization/index.html",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "",
    "text": "Previously, in Part 1 of this tutorial, we calculated the Standardized Precipitation Index (SPI) for different time scales using the {SCI} package in R. Now, we will map the SPI values for the districts of Somalia using {sf} and {ggplot2} packages in R."
  },
  {
    "objectID": "blog/posts/spi_somalia_visualization/index.html#overview",
    "href": "blog/posts/spi_somalia_visualization/index.html#overview",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "",
    "text": "Previously, in Part 1 of this tutorial, we calculated the Standardized Precipitation Index (SPI) for different time scales using the {SCI} package in R. Now, we will map the SPI values for the districts of Somalia using {sf} and {ggplot2} packages in R."
  },
  {
    "objectID": "blog/posts/spi_somalia_visualization/index.html#about-the-data",
    "href": "blog/posts/spi_somalia_visualization/index.html#about-the-data",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "About the data",
    "text": "About the data\nThe information of the Somalian sub national administrative boundaries is obtained from the Humanitarian Data Exchange (HDX) initiative of the United Nations Office for the Coordination of Humanitarian Affairs (OCHA). The information comes as a shapefile .shp and is available at https://data.humdata.org/dataset/cod-ab-som? in a zip file named som_adm_ocha_20250108_AB_SHP.zip. The shapefile contains the administrative boundaries of Somalia at the subnational level. In particular, we will use file som_admbnda_ADM2_ocha_20250108.shp, that contains the shapefile of Somalia at the district level. I downloaded this file and located it in /shp folder."
  },
  {
    "objectID": "blog/posts/spi_somalia_visualization/index.html#set-up",
    "href": "blog/posts/spi_somalia_visualization/index.html#set-up",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "Set-up",
    "text": "Set-up\nBefore we begin, we need to install and load the necessary R packages.\n\nlibrary(tidyverse) # For data manipulation and visualization\nlibrary(sf) # For handling spatial data\nlibrary(ggplot2) # For data visualization\nlibrary(patchwork) # For combining plots\nlibrary(ggtext) # Use rich text elements in ggplot\nlibrary(showtext) # Add custom fonts to plots"
  },
  {
    "objectID": "blog/posts/spi_somalia_visualization/index.html#loading-data-hdx",
    "href": "blog/posts/spi_somalia_visualization/index.html#loading-data-hdx",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "Loading data HDX",
    "text": "Loading data HDX\nData can be found here in file som-rainfall-adm2-full.csv. For Somalia, data is available from January 1981.\n\n# Load the shapefile for Somalia\nshp_somalia &lt;- read_sf(\"shp/som_admbnda_adm2_ocha_20250108.shp\")\n\n# Rename columns for better readability\nshp_somalia &lt;- shp_somalia |&gt;\n  rename(\n    district = ADM2_EN, # Rename ADM2_EN to district (English names of districts)\n    district_code = ADM2_PCODE # Rename ADM2_PCODE to district_code (district codes)\n  )\n\n\nData wrangling\nI will add the SPI values previously calculated to the shapefile data frame. I saved the SPI values in a RData file named rainfall_data.RData.\n\nload(\"rainfall_data.RData\")\n\n# First, we need to filter the SPI values for the last available month, i.e. December 2024\n# to have only one observation per district\nrainfall_data_dec2024 &lt;- rainfall_data |&gt;\n  filter(month == 2 & year == 2024)\n\n# Merge the shapefile with the SPI values\nshp_somalia &lt;- shp_somalia |&gt;\n  left_join(rainfall_data_dec2024, by = c(\"district_code\"))"
  },
  {
    "objectID": "blog/posts/spi_somalia_visualization/index.html#we-then-calculate-the-spi-for-different-time-scales-1-3-6-12-months.",
    "href": "blog/posts/spi_somalia_visualization/index.html#we-then-calculate-the-spi-for-different-time-scales-1-3-6-12-months.",
    "title": "How to compute and visualize the standardized precipitation index (SPI) for drought analysis",
    "section": "We then calculate the SPI for different time scales (1, 3, 6, 12 months).",
    "text": "We then calculate the SPI for different time scales (1, 3, 6, 12 months)."
  },
  {
    "objectID": "blog/posts/spi_somalia_visualization/index.html#set-theme-settings-and-define-fonts-colors-and-text-to-be-used-in-the-map",
    "href": "blog/posts/spi_somalia_visualization/index.html#set-theme-settings-and-define-fonts-colors-and-text-to-be-used-in-the-map",
    "title": "How to compute and visualize the Standardized Precipitation Index (SPI) for drought analysis",
    "section": "Set theme settings and define fonts, colors, and text to be used in the map",
    "text": "Set theme settings and define fonts, colors, and text to be used in the map\n\n# Custom theme for the map and legend\ntheme_spi_map &lt;- function() {\n  theme_minimal(\n    base_family = \"Roboto Condensed\" # Base theme with custom font\n  ) +\n    # Custom theme settings\n    theme(\n\n      # Title settings\n      plot.title.position = \"plot\", # Position of the title\n      plot.title = element_textbox(\n        color = \"black\",\n        face = \"bold\",\n        size = 22,\n        margin = margin(5, 0, 5, 0), # Top, right, bottom, left\n        width = unit(1, \"npc\") # Width of the title, npc == 1 corresponds to the full width of the plot\n      ),\n      plot.subtitle = element_textbox(\n        color = \"grey50\",\n        face = \"bold\",\n        size = 14,\n        margin = margin(20, 0, 10, 0),\n        width = unit(1, \"npc\")\n      ),\n\n      # Legend settings\n      legend.position = \"top\",\n      legend.title = element_blank(),\n      legend.key.height = unit(0.1, \"cm\"), # Height of the legend key\n      legend.key.width = unit(0.1, \"cm\"), # Width of the legend key\n      legend.spacing.x = unit(0.1, \"cm\"),\n      legend.key.spacing = unit(0.1, \"cm\"), # Spacing between legend keys\n      legend.text = element_text(\n        margin = margin(5, 0, 5, 0),\n        face = \"bold\",\n        color = \"grey10\",\n        size = 10\n      ),\n      legend.direction = \"horizontal\",\n      legend.byrow = FALSE,\n\n      # Caption settings\n      plot.caption = element_textbox(\n        color = \"grey70\",\n        face = \"italic\",\n        size = 10,\n        margin = margin(10, 0, 5, 0),\n        width = unit(1, \"npc\")\n      ),\n      plot.background = element_rect(\n        color = \"white\",\n        fill = \"white\"\n      ),\n      plot.margin = margin(20, 40, 20, 40)\n    )\n}\n\n# Title, subtitle, and caption for the waffle chart\ntitle_chart &lt;- \"Standardized Precipitation Index (SPI) in Somalia\"\nsubtitle_chart &lt;- \"February 2024\"\ncaption_chart &lt;- \"Data: Somalia: Own estimations using Somalia Rainfall Indicators at Subnational Level (HDX) | Graphic: Juan Torres Munguía\"\n\nNow, lets create a histogram of the SPI values for the districts of Somalia to use as a legend for the map.\n\nspi_colors &lt;- data.frame(\n  ymin = c(-5, -2, -1.5, -1, 0, 1, 1.5, 2),\n  ymax = c(-2, -1.5, -1, 0, 1, 1.5, 2, 5),\n  label = factor(\n    c(\n      \"Extreme dry\", \"Severe dry\", \"Moderate dry\", \"Near normal\",\n      \"Near normal\", \"Moderate wet\", \"Severe wet\", \"Extreme wet\"\n    ),\n    levels = c(\n      \"Extreme dry\", \"Severe dry\", \"Moderate dry\", \"Near normal\",\n      \"Moderate wet\", \"Severe wet\", \"Extreme wet\"\n    )\n  ),\n  fill = c(\n    \"#F76D5E\", \"#FFAD72\", \"#FFE099\", \"#E5FFE5\",\n    \"#E5FFE5\", \"#99EAFF\", \"#75D3FF\", \"#3D87FF\"\n  )\n)\n\nshp_somalia &lt;- shp_somalia %&gt;%\n  mutate(spi_category = cut(spi1,\n    breaks = c(-Inf, spi_colors$ymax),\n    labels = spi_colors$label,\n    right = TRUE\n  )) |&gt; # right = TRUE means that the intervals are closed on the right\n  filter(!is.na(spi1))\n\nhistogram_spi &lt;- shp_somalia |&gt;\n  filter(!is.na(spi_category)) |&gt;\n  ggplot(aes(x = spi_category, fill = spi_category)) +\n  geom_bar(color = \"white\") +\n  scale_fill_manual(values = setNames(spi_colors$fill, spi_colors$label)) +\n  labs(\n    title = \"\",\n    x = \"\",\n    y = \"Number of districts\"\n  ) +\n  theme_spi_map() +\n  theme(\n    legend.position = \"none\",\n    axis.title = element_text(\n      color = \"grey10\",\n      face = \"bold\",\n      size = 7\n    ),\n    axis.text = element_text(\n      color = \"grey10\",\n      face = \"bold\",\n      size = 7\n    ),\n    axis.line = element_blank(),\n    panel.grid = element_blank()\n  ) +\n  coord_flip()\n\n\n# Read the shapefile of Somalia with the interior region borders\nshp_somalia_region &lt;- read_sf(\"shp/som_admbnda_adm1_ocha_20250108.shp\")\n\nshp_somalia_region &lt;- st_transform(shp_somalia_region, 3857) # Web Mercator projection\nshp_somalia &lt;- st_transform(shp_somalia, 3857)\n\nmap_spi &lt;- ggplot() +\n  geom_sf(\n    data = shp_somalia, aes(fill = spi_category), color = \"grey\", linewidth = 0.5\n  ) +\n  scale_fill_manual(values = setNames(spi_colors$fill, spi_colors$label)) +\n  geom_sf(data = shp_somalia_region, fill = NA, color = \"black\", linewidth = 0.9) +\n  labs(\n    title = title_chart,\n    subtitle = subtitle_chart,\n    caption = caption_chart,\n    x = \"\",\n    y = \"\",\n    fill = \"\"\n  ) +\n  theme_spi_map() +\n  theme(\n    legend.position = \"none\",\n    # Axis settings\n    axis.title = element_blank(),\n    axis.line = element_blank(),\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank()\n  )\n\n\nmap_spi +\n  inset_element(histogram_spi, left = 0.4, bottom = 0, right = 1, top = 0.4, on_top = FALSE)\nshowtext_opts(dpi = 320) # Set the resolution of the image 320 dpi is for high-quality images (\"retina\")\nggsave(\n  \"spi-somalia-map.png\",\n  dpi = 320,\n  width = 12,\n  height = 9,\n  units = \"in\"\n)\nshowtext_auto(FALSE)"
  }
]